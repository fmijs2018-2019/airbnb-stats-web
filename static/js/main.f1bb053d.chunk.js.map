{"version":3,"sources":["scenes/dashboard/utils/map_marker.png","Auth.ts","redux/actions/authActions.ts","components/SecuredRoute.tsx","components/Callback.tsx","redux/state/listingsState.ts","redux/actions/commonActions.ts","api/httpClient.ts","api/listingsApi.ts","redux/actions/listingsActions.ts","redux/state/neighborhoodsState.ts","api/neighborhoodsApi.ts","redux/actions/neighborhoodsActions.ts","redux/state/commonState.ts","redux/state/listingsGridState.ts","redux/actions/listingsGridActions.ts","redux/reducers/listingsGridReducer.ts","redux/state/authState.ts","redux/rootReducer.ts","redux/reducers/listingsReducer.ts","redux/reducers/neighborhoodsReducer.ts","redux/reducers/commonReducer.ts","redux/reducers/authReducer.ts","redux/store.ts","scenes/dashboard/components/NeighTooltip.tsx","scenes/dashboard/components/NgListingsByTypePieChart.tsx","scenes/dashboard/components/NgListingsRatingBarChart.tsx","components/Panel.tsx","components/Stepper.tsx","scenes/dashboard/components/NgReportsPanel.tsx","components/icnos/GithubIcon.tsx","Layout/components/NavigationBar.tsx","Layout/index.tsx","scenes/dashboard/DashboardScene.tsx","scenes/listings/components/ListingNeighborhoodColumn.tsx","scenes/listings/components/ListingRatingColumn.tsx","scenes/listings/components/ListingTypeColumn.tsx","components/TablePagingActions.tsx","components/TablePaging.tsx","components/VirtualizedTable.tsx","scenes/listings/components/ListingAccommodatesColumn.tsx","scenes/listings/components/ListingsTable.tsx","components/ExpPanel.tsx","components/FromToDatePicker.tsx","components/NumberRange.tsx","scenes/listings/components/ListingsFilters.tsx","scenes/listings/ListingsScene.tsx","scenes/reports/components/SimpleRadialBarChart.tsx","scenes/reports/components/SpecialDomainRadarChart.tsx","scenes/reports/components/ComposedBarChart.tsx","scenes/reports/components/SimpleLineChart.tsx","scenes/reports/components/SideDrawer.tsx","scenes/reports/ReportsScene.tsx","App.tsx","registerServiceWorker.ts","index.tsx"],"names":["module","exports","__webpack_require__","p","clientBaseUrl","Auth","Object","classCallCheck","this","auth0","domain","audience","clientID","redirectUri","responseType","scope","handleAuthentication","bind","signIn","signOut","authOptions","authorize","_this","Promise","resolve","reject","parseHash","err","authResult","idToken","logout","returnTo","_this2","checkSession","auth0Client","isAuthenticated","state","exp","auth","expiresAt","Date","getTime","silentAuth","dispatch","silentAuthStart","promise","then","data","silentAuthSuccess","silentAuthEnd","catch","error","silentAuthError","type","authError","payload","authSuccess","SecureRoute","appState","redirectUrl","location","_this$props","props","isAuth","silentAuthInProgress","component","routerProps","objectWithoutProperties","Component","react","es_Route","assign","render","SecuredRoute_LoadingScreen","SecuredRoute_UnauthorizedScreen","onSignIn","React","LoadingScreen","style","display","position","width","height","top","left","marginTop","marginLeft","index_es","color","size","UnauthorizedScreen","textAlign","fontSize","alignItems","margin","marginRight","backgroundColor","variant","Link","to","onClick","connect","Callback","possibleConstructorReturn","getPrototypeOf","call","result","history","replace","console","log","_context","t0","cmpWithRouter","withRouter","initialListingsState","locations","item","fetchListError","fetchListingError","isFetching","HttpClient","url","config","axiosConfig","store","getState","objectSpread","headers","Authorization","concat","axios","get","response","httpClient","apiBaseUrl","ListingsApi","skip","take","ngs","propTypes","roomTypes","fromDate","toDate","fromPrice","toPrice","orderBy","params","length","join","id","listingsApiClient","fetchLocationsSuccess","fetchLocationsError","fetchListingDetailedSuccess","listing","fetchListingDetailedError","initialNeighborhoodsState","detailedList","ngReports","allReports","fetchError","neighborhoodsApi","neighborhoodsApiClient","fetchNeighborhoodsDetailedSuccess","neighborhoods","fetchNeighborhoodsError","fetchAllReportsSuccess","reports","fetchAllReportsError","initialCommonState","initialListingsGridState","roomTypeFilter","propertyTypeFilter","neighborhoodFilter","fetchFiltersDataError","fetchListingsError","listings","pageSize","currentPage","totalCount","numberOfPages","order","orderByDictionary","price_asc","accommodates_asc","rating_asc","price_desc","accommodates_desc","rating_desc","fetchTableDataSuccess","fetchTableDataError","fetchFiltersDataSuccess","deepClone","obj","JSON","parse","stringify","initialAuthState","combineReducers","arguments","undefined","action","common","listingsGrid","_action$payload","ngId","ngChecked","checked","ngFilter","_action$payload2","ptId","ptChecked","ptFilter","_action$payload3","rtId","rtChecked","rtFilter","ngFilterNew","rtFilterNew","ptFilterNew","keys","forEach","key","_action$payload4","total_count","Math","ceil","idTokenPayload","expiresIn","accessToken","initialAppState","createStore","rootReducer","composeWithDevTools","applyMiddleware","thunk","withStyles","theme","createStyles","tooltip","padding","zIndex","pointerEvents","opacity","borderRadius","icon","ngName","listCount","x","y","_props$classes","classes","pos","xPos","xVal","yPos","yVal","_window","window","innerWidth","innerHeight","className","PlaceRounded_default","a","root","colors","NgListingsByTypePieChart","ngListingsByType","cx","cy","outerRadius","innerRadius","toString","sort","b","count","slice","other","reduce","prevValue","currentValue","push","PieChart","Pie","legendType","dataKey","nameKey","paddingAngle","minAngle","label","map","entry","index","Cell","fill","Legend","iconSize","verticalAlign","Tooltip","NgListingsRatingBarChart","byRating","barSize","reportByRange","i","range","el","rating","floor","values","BarChart","CartesianGrid","stroke","XAxis","YAxis","content","listStyle","right","align","Bar","Pannel","pannel","closeBtnContainer","CancelRounded_default","closeBtn","clickHandler","header","children","background","flexDirection","float","&:hover","cursor","overflowY","flexGrow","btn","btnDisable","dots","dotsActive","activeStep","stepsCount","handleNext","handleBack","dot","dotActive","steps","nextButton","disabled","icons_index_es","backButton","NgReportPanel","setState","ng","name","listingsCount","onClose","Panel","byPropType","byRoomType","components_Stepper","GithubIcon","SvgIcon_default","d","NavigationBar","toggleDrawer","isDrawerOpen","headerColor","updateHeaderColorOnClose","getButtonsList","Button_default","onSignOut","_this$state","AppBar_default","navBar","Toolbar_default","toolbar","Typography_default","logoText","noWrap","IconButton_default","menuList","aria-label","Menu_default","menuItem","grow","target","href","Avatar_default","avatar","src","picture","logInOutBtn","Drawer_default","SlideProps","onExited","paperAnchorTop","drawer","anchor","open","tabIndex","role","onKeyDown","drawerItem","minHeight","nopad","paddingRight","paddingLeft","fontWeight","@media screen and (max-width: 700px)","textTransform","logoIcon","minWidth","Layout","clearAuthState","components_NavigationBar","initialViewState","longitude","latitude","zoom","pitch","bearing","transitionDuration","transitionInterpolator","FlyToInterpolator","DashBoardScene","getLayers","hoveredNgId","selectedNgId","iconLayer","IconLayer","pickable","iconAtlas","mapMarker","iconMapping","marker","mask","sizeScale","getPosition","lon","lat","getIcon","getSize","getColor","geoJsonAllLayer","showAllGeoJsons","GeoJsonLayer","_","filled","extruded","getFillColor","lineJointRounded","getLineColor","getLineWidth","onHover","ngHoverHandler","ngClickHandler","geoJson","stroked","feature","object","properties","neighbourhood","tooltipProps","tooltipInfo","setNeighborhood","onViewStateChange","_ref","viewState","neighborhoodId","newViewState","centerLongitude","centerLatitude","onTransitionStart","onTransitionEnd","closeReportsPanelHandler","closeListingPanelHandler","fetchListingDetailed","getSelectedNeighborhood","getNgReports","neigh","getNgListingsCount","fetchLocations","fetchNeighborhoodsDetailed","fetchAllReports","ngReport","react_default","createElement","src_Layout","esm","layers","controller","useDevicePixels","dist_esm","mapStyle","mapboxApiAccessToken","components_NeighTooltip","NgReportsPanel","getLocations","getNeighborhoodsDetailed","getAllReports","getListingDetailed","border","neighborhood","LocationOn_default","orageChip","orageIcon","redChip","redIcon","greenChip","greenIcon","chipClasses","AssessmentOutlined_default","ListingTypeColumn","_props$type","roomType","propertyType","HomeOutlined_default","LockOpen_default","SupervisedUserCircleRounded_default","TablePaginationActions","handleFirstPageButtonClick","event","onChangePage","handleBackButtonClick","page","handleNextButtonClick","handleLastPageButtonClick","lastPage","max","rowsPerPage","button","FirstPage_default","KeyboardArrowLeft_default","KeyboardArrowRight_default","LastPage_default","flexShrink","palette","text","secondary","spacing","unit","TablePaging","handleChangePage","onPageChange","handleChangeRowsPerPage","onPageSizeChange","value","pagesCount","rootClasses","classNames","rowsPerPageOptions","colSpan","onChangeRowsPerPage","ActionsComponent","TablePagingActions","VirtualizedTable","getRowClassName","rowClassName","tableRow","flexContainer","cellRenderer","cellProps","column","_this$props2","rowHeight","renderCell","cellData","tableCell","createSortHandler","property","onSort","headerRenderer","_ref2","_this$props3","headerHeight","sortable","active","disableSort","title","placement","enterDelay","sortLabelIcon","sortLabelIconWithoutTransition","direction","IconComponent","ExpandMore","UnfoldMore","noClick","_this$props4","columns","onRowClick","rowGetter","rowCount","dist_es","_ref3","table","col","fontFamily","typography","boxSizing","tableRowHover","grey","flex","transition","badge","accommodates","badgeContent","ListingsTable","getColumns","toFixed","components_ListingNeighborhoodColumn","_ref4","components_ListingAccommodatesColumn","_ref5","components_ListingRatingColumn","overflowX","borderTop","components_VirtualizedTable","_ref6","components_TablePaging","paging","styles","boxShadow","&:before","panelDetails","maxHeight","expanded","onChange","summary","expansionPanelClassName","e","expandIcon","ExpandMore_default","FromToDatePicker","from","fromChangeHandler","toChangeHandler","container","noValidate","TextField_default","InputProps","textField","InputLabelProps","shrink","flexWrap","NumberRange","onToChange","onFromChange","placeholder","inputProps","ListingsFilters","createOnExpandHandler","onNeighborhoodChange","onNgChange","onPropertyTypeChange","onPTChange","onRoomTypeChange","onRTChange","getFiltersCount","filtersCollection","onApply","onClear","onFromDateChange","onToDateChange","onFromPriceChange","onToPriceChange","_this$props$filters","filters","propertyTypes","ngFiltersCount","rtFiltersCount","ptFiltersCount","Fragment","components_ExpPanel","expansionPanel","invisible","checkbox","control","rt","pt","components_FromToDatePicker","expansionPanelLast","NumberRange_NumberRange","sidebar","borderBottom","listingsFilters","bottom","listingsTable","borderLeft","filtersContainer","ListingsScene","setPage","fetchTableData","setPageSize","applyFilters","invalidFilter","enqueueSnackbar","autoHideDuration","clearFilters","sortHandler","setOrder","setOrderBy","newDate","setFromDate","setToDate","setFromPrice","setToPrice","fetchFiltersData","rows","v","neighborhoodOverview","neighborhood_overview","price","propertytype","roomtype","components_ListingsFilters","setPropertyTypeFilter","setRoomTypeFilter","setNeighborhoodFilter","components_ListingsTable","withSnackBar","withSnackbar","sceneWithStyles","getFiltersData","setNeighborhoodsFilter","setPropertyTypesFilter","setRoomTypesFilter","_getState$listingsGri","filter","ord","getAllListings","components_SimpleRadialBarChart","ResponsiveContainer","RadialBarChart","RadialBar","layout","SpecialDomainRadarChart","RadarChart","PolarGrid","PolarAngleAxis","PolarRadiusAxis","angle","Radar","fillOpacity","PureComponent","ComposedBarChart","ComposedChart","Line","SimpleLineChart","LineChart","strokeDasharray","dataKey1","activeDot","r","dataKey2","dataKey3","LeftSideDrawer","onSelect","onNgSelect","sideList","List_default","ListItem_default","ListItemText_default","primary","ReportsScene","loading","availabilityReports","priceReports","ratingReports","assertThisInitialized","getReportsByNgId","getTotalRatingData","getAllNeighborhoodsSimple","_this3","p1","getAllTypesOfRatingReportsByNgId","p2","getAvailabilityReportsByNgId","p3","getPriceReportsByNgId","all","slicedToArray","r1","r2","r3","totalRating","c","fullMark","avgDailyPrice","avgMonthlyPrice","avgWeaklyPrice","round","availability","days","cleanliness","checkin","accuracy","communication","ratingRep","priceRep","getPriceRatingData","availabilityRep","getAvailabilityReportData","typesOfRatingReport","getAllTypesOfRatingRepor","SideDrawer","justify","md","SpecialDomainRadarChart_SpecialDomainRadarChart","SimpleLineChart_SimpleLineChart","ComposedBarChart_ComposedBarChart","App","trySilentAuth","forceUpdate","Switch","Route","exact","path","SecuredRoute","Redirect","isLocalhost","Boolean","hostname","match","registerValidSW","swUrl","navigator","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","ReactDOM","es","BrowserRouter","build","maxSnack","src_App","document","getElementById","URL","process","origin","addEventListener","fetch","status","indexOf","ready","unregister","reload","checkValidServiceWorker","registerServiceWorker"],"mappings":"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","file":"static/js/main.f1bb053d.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/map_marker.d81d9c97.png\";","import * as auth0 from 'auth0-js';\r\nimport { Auth0DecodedHash, AuthorizeOptions } from 'auth0-js';\r\n\r\n// export const clientBaseUrl = 'http://localhost:3000';\r\nexport const clientBaseUrl = 'https://fmijs2018-2019.github.io/airbnb-stats-web';\r\n\r\nclass Auth {\r\n\tauth0: auth0.WebAuth;\r\n\r\n\tconstructor() {\r\n\t\tthis.auth0 = new auth0.WebAuth({\r\n\t\t\t// the following three lines MUST be updated\r\n\t\t\tdomain: 'airbnb-stats.eu.auth0.com',\r\n\t\t\taudience: 'https://airbnb-stats.eu.auth0.com/userinfo',\r\n\t\t\tclientID: 'jz1zd7BI5Lx5UjcU3Ua62XkVPqvZOuND',\r\n\t\t\tredirectUri:  clientBaseUrl + '/callback',\r\n\t\t\tresponseType: 'token id_token',\r\n    \t\tscope: 'openid profile email'\r\n\t\t});\r\n\r\n\t\tthis.handleAuthentication = this.handleAuthentication.bind(this);\r\n\t\tthis.signIn = this.signIn.bind(this);\r\n\t\tthis.signOut = this.signOut.bind(this);\r\n\t}\r\n\r\n\tsignIn(authOptions?: AuthorizeOptions) {\r\n\t\tthis.auth0.authorize(authOptions);\r\n\t}\r\n\r\n\thandleAuthentication(): Promise<Auth0DecodedHash> {\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tthis.auth0.parseHash((err, authResult) => {\r\n\t\t\t\tif (err) {\r\n\t\t\t\t\treturn reject(err);\r\n\t\t\t\t}\r\n\t\t\t\tif (!authResult || !authResult.idToken) {\r\n\t\t\t\t\treturn reject(err);\r\n\t\t\t\t}\r\n\t\t\t\tresolve(authResult);\r\n\t\t\t});\r\n\t\t})\r\n\t}\r\n\r\n\tsignOut() {\r\n\t\tthis.auth0.logout({\r\n\t\t\treturnTo: clientBaseUrl,\r\n\t\t\tclientID: 'jz1zd7BI5Lx5UjcU3Ua62XkVPqvZOuND',\r\n\t\t});\r\n\t}\r\n\r\n\tsilentAuth(): Promise<Auth0DecodedHash> {\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tthis.auth0.checkSession({}, (err, authResult) => {\r\n\t\t\t\tif (err) {\r\n\t\t\t\t\treturn reject(err);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tresolve(authResult);\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n}\r\n\r\nconst auth0Client = new Auth();\r\n\r\nexport default auth0Client;","import { IApplicationState } from \"../store\";\r\nimport { Dispatch } from 'redux';\r\nimport { AuthorizeOptions, Auth0DecodedHash } from 'auth0-js';\r\nimport auth0Client from \"../../Auth\";\r\nimport { IReduxAction } from \"../../models/ReduxAction\";\r\n\r\n//selectors\r\nexport const isAuthenticated = (state: IApplicationState): boolean => {\r\n    const exp = state.auth.expiresAt;\r\n    const token = state.auth.idToken;\r\n    return (token && exp) ? new Date().getTime() < exp: false;\r\n}\r\n\r\nexport const SILENT_AUTH_START = 'SILENT_AUTH_START';\r\nexport const SILENT_AUTH_END = 'SILENT_AUTH_END';\r\nexport const SILENT_AUTH_SUCCESS = 'SILENT_AUTH_SUCCESS';\r\nexport const SILENT_AUTH_ERROR = 'SILENT_AUTH_ERROR';\r\nexport const AUTH_ERROR = 'AUTH_ERROR';\r\nexport const AUTH_SUCCESS = 'AUTH_SUCCESS';\r\nexport const SIGN_OUT_SUCCESS = 'SIGN_OUT_SUCCESS';\r\n\r\nexport const REDIRECT_TO_AUTH0 = 'REDIRECT_TO_AUTH0';\r\n\r\n//actions\r\nexport const handleAuthentication = () => {\r\n    return function (dispatch: Dispatch): Promise<Auth0DecodedHash> {\r\n        const promise = auth0Client.handleAuthentication();\r\n\r\n        promise\r\n            .then((data: Auth0DecodedHash) => {\r\n                dispatch(authSuccess(data));\r\n            })\r\n            .catch((error) => {\r\n                dispatch(authError(error));\r\n            });\r\n\r\n        return promise;\r\n    }\r\n}\r\n\r\nexport const silentAuth = () => {\r\n    return function (dispatch: Dispatch): Promise<Auth0DecodedHash> {\r\n        dispatch(silentAuthStart());\r\n        const promise = auth0Client.silentAuth();\r\n\r\n        promise\r\n            .then((data: Auth0DecodedHash) => {\r\n                dispatch(silentAuthSuccess(data));\r\n                dispatch(silentAuthEnd());\r\n            })\r\n            .catch((error) => {\r\n                dispatch(silentAuthError(error));\r\n                dispatch(silentAuthEnd());\r\n            });\r\n\r\n        return promise;\r\n    }\r\n}\r\n\r\nexport const silentAuthStart = (): IReduxAction => ({ type: SILENT_AUTH_START });\r\nexport const silentAuthEnd = (): IReduxAction => ({ type: SILENT_AUTH_END });\r\n\r\nexport const clearAuthState = (): IReduxAction => {\r\n    return { type: SIGN_OUT_SUCCESS };\r\n};\r\n\r\nexport const authError = (error: any): IReduxAction => ({\r\n    type: AUTH_ERROR,\r\n    payload: error,\r\n});\r\n\r\nexport const authSuccess = (data: Auth0DecodedHash) => ({\r\n    type: AUTH_SUCCESS,\r\n\tpayload: data,\r\n});\r\n\r\nexport const silentAuthError = (error: any): IReduxAction => ({\r\n    type: SILENT_AUTH_ERROR,\r\n    payload: error,\r\n});\r\n\r\nexport const silentAuthSuccess = (data: Auth0DecodedHash) => ({\r\n    type: SILENT_AUTH_SUCCESS,\r\n    payload: data,\r\n});","import * as React from 'react';\r\nimport { Route, RouteProps, Link } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { CircularProgress, Button } from '@material-ui/core';\r\nimport amsterdamImg from './utils/amsterdam.jpg';\r\nimport { IApplicationState } from '../redux/store';\r\nimport { isAuthenticated } from '../redux/actions/authActions';\r\nimport auth0Client from '../Auth';\r\n\r\ninterface SecureRouteProps extends RouteProps {\r\n\tsilentAuthInProgress: boolean;\r\n\tisAuth: boolean;\r\n}\r\n\r\nclass SecureRoute extends React.Component<SecureRouteProps> {\r\n\r\n\tsignIn = () => {\r\n\t\tconst authOptions: any = { appState: { redirectUrl: location } };\r\n\t\tauth0Client.signIn(authOptions);\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst { isAuth, silentAuthInProgress, component, ...routerProps } = this.props;\r\n\t\tconst Component: any = component;\r\n\r\n\t\treturn (\r\n\t\t\t<Route {...routerProps} render={(props) => {\r\n\t\t\t\tif (silentAuthInProgress) {\r\n\t\t\t\t\treturn <LoadingScreen />;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (!isAuth) {\r\n\t\t\t\t\treturn <UnauthorizedScreen onSignIn={() => this.signIn()} />;\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn <Component {...props} />;\r\n\t\t\t}} />\r\n\t\t);\r\n\t}\r\n}\r\n\r\ninterface IUnauthorizedScreenProps {\r\n\tonSignIn: () => void;\r\n}\r\n\r\nexport const LoadingScreen = (props: any) => {\r\n\treturn (\r\n\t\t<div style={{ display: 'inline-block', position: 'absolute', width: '100px', height: '100px', top: '50%', left: '50%', marginTop: '-50px', marginLeft: '-50px' }}>\r\n\t\t\t<CircularProgress color=\"primary\" size={65} />\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport const UnauthorizedScreen = (props: IUnauthorizedScreenProps) => {\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<div style={{ textAlign: 'center', fontSize: '20px', marginTop: '50px'}}>401 Unauthorized</div>\r\n\t\t\t<div style={{ display: 'flex', alignItems: 'center' }}>\r\n\t\t\t\t<div style={{ display: 'inline-block', margin: 'auto' }}>\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tstyle={{ marginRight: '30px', backgroundColor: 'rgba(255, 255, 255, 0.3)'}}\r\n\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\tcomponent={(props: any) => <Link to=\"/dashboard\" {...props}></Link>}>\r\n\t\t\t\t\t\tHome\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tstyle={{ backgroundColor: 'rgba(255, 255, 255, 0.3)'}}\r\n\t\t\t\t\t\tvariant=\"outlined\" color=\"primary\" onClick={() => props.onSignIn()}>\r\n\t\t\t\t\t\tLogIn\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nconst mapStateToProps = (state: IApplicationState) => ({\r\n\tsilentAuthInProgress: state.auth.silentAuthInProgress,\r\n\tisAuth: isAuthenticated(state),\r\n});\r\n\r\nexport default connect(mapStateToProps, null)(SecureRoute);","import { Auth0DecodedHash } from 'auth0-js';\r\nimport * as React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { RouteComponentProps, withRouter } from 'react-router-dom';\r\nimport { LoadingScreen } from './SecuredRoute';\r\nimport { IApplicationState } from '../redux/store';\r\nimport { handleAuthentication } from '../redux/actions/authActions';\r\n\r\ninterface ICallbackProps extends RouteComponentProps {\r\n    handleAuthentication: () => Promise<Auth0DecodedHash>\r\n}\r\n\r\nclass Callback extends React.Component<ICallbackProps> {\r\n    constructor(props: Readonly<ICallbackProps>) {\r\n        super(props);\r\n    }\r\n\r\n    async componentDidMount() {\r\n        try { \r\n            const result = await this.props.handleAuthentication();\r\n            const { appState } = result;\r\n\r\n            if (appState && appState.redirectUrl) {\r\n                this.props.history.replace(appState.redirectUrl);\r\n            } else {\r\n                this.props.history.replace(\"/dashboard\");\r\n            }\r\n\r\n        } catch (error) {\r\n            //todo: handle error\r\n            console.log(\"Auth error\", error);\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return <LoadingScreen />;\r\n    }\r\n}\r\n\r\nconst cmpWithRouter = withRouter(Callback);\r\n\r\nconst mapStateToProps = (state: IApplicationState) => ({\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch: any) => ({\r\n    handleAuthentication: (): Promise<Auth0DecodedHash> => dispatch(handleAuthentication()),\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(cmpWithRouter);","import { IListingDetailed } from \"../../models/listings/Listing\";\r\nimport { IListingLocation } from \"../../models/listings/ListingLocation\";\r\nimport { IError } from \"../../models/Error\";\r\n\r\nexport interface IListingsState {\r\n    locations: _.Dictionary<IListingLocation[]> | null;\r\n    item: IListingDetailed | null;\r\n    fetchListError: IError | null;\r\n    fetchListingError: IError | null;\r\n}\r\n\r\nexport const initialListingsState: IListingsState = {\r\n    locations: null,\r\n    item: null,\r\n    fetchListError: null,\r\n    fetchListingError: null,\r\n}\r\n","import { IReduxAction } from \"../../models/ReduxAction\";\r\n\r\nexport const IS_FETCHING = 'IS_FETCHING';\r\n\r\nexport const isFetching = (isFetching: boolean): IReduxAction => ({\r\n    type: IS_FETCHING,\r\n    payload: isFetching\r\n})\r\n","import axios, { AxiosRequestConfig } from 'axios';\r\nimport store from '../redux/store';\r\nimport { isAuthenticated } from '../redux/actions/authActions';\r\n\r\nclass HttpClient {\r\n    \r\n    get<T>(url: string, config?: AxiosRequestConfig) {\r\n        let axiosConfig: AxiosRequestConfig = {};\r\n        const state = store.getState();\r\n        const idToken = state.auth.idToken;\r\n        \r\n        if(config) {\r\n            axiosConfig = {... config}\r\n        }\r\n\r\n        if (isAuthenticated(state)) {\r\n            axiosConfig.headers = { Authorization: `Bearer ${idToken}` }\r\n        }\r\n        \r\n        return axios.get<T>(url, axiosConfig)\r\n            .then((response) => response.data);\r\n    }\r\n}\r\n\r\nconst httpClient = new HttpClient;\r\nexport default httpClient;\r\n","import httpClient from './httpClient';\r\nimport { AxiosRequestConfig } from 'axios';\r\nimport { IFiltersDataCollections } from '../models/grid/filtersData';\r\nimport { IListingLocation } from '../models/listings/ListingLocation';\r\nimport { IListing, IListingDetailed } from '../models/listings/Listing';\r\n\r\nexport const apiBaseUrl = 'https://airbnb-api.azurewebsites.net'\r\nclass ListingsApi {\r\n    getLocations() {\r\n        return httpClient.get<IListingLocation[]>(apiBaseUrl + '/listings/locations');\r\n    }\r\n    \r\n    getFiltersData() {\r\n        return httpClient.get<IFiltersDataCollections>(apiBaseUrl + '/listings/filters-data');\r\n    }\r\n\r\n    getAllListings(skip: number, take: number, ngs?: number[], propTypes?: number[], roomTypes?: number[], fromDate?: string, toDate?: string, fromPrice?: number, toPrice?: number, orderBy?: number) {\r\n        const config: AxiosRequestConfig = {\r\n            params: {skip, take}\r\n        }\r\n\r\n        if(orderBy) {\r\n            config.params['order_by'] = orderBy;\r\n        }\r\n\r\n        if(ngs && ngs.length) {\r\n            config.params['neighs'] = ngs.join(',');\r\n        }\r\n\r\n        if(propTypes && propTypes.length) {\r\n            config.params['prop_types'] = propTypes.join(',');\r\n        }\r\n\r\n        if(roomTypes && roomTypes.length) {\r\n            config.params['room_types'] = roomTypes.join(',');\r\n        }\r\n\r\n        if(fromDate && toDate) {\r\n            config.params['from_date'] = fromDate;\r\n            config.params['to_date'] = toDate;\r\n        }\r\n\r\n        if(fromPrice) {\r\n            config.params['from_price'] = fromPrice;\r\n        }\r\n\r\n        if(toPrice) {\r\n            config.params['to_price'] = toPrice;\r\n        }\r\n\r\n        return httpClient.get<{total_count: number, listings: IListing[]}>(apiBaseUrl + '/listings', config);\r\n    }\r\n\r\n    getListingDetailed(id: number) {\r\n        return httpClient.get<IListingDetailed>(`${apiBaseUrl}/listings/${id}`);\r\n    }\r\n}\r\n\r\nconst listingsApiClient = new ListingsApi();\r\nexport default listingsApiClient;\r\n","import { Dispatch } from 'redux';\r\nimport { IReduxAction } from '../../models/ReduxAction';\r\nimport { isFetching } from './commonActions';\r\nimport listingsApiClient from '../../api/listingsApi';\r\nimport * as _ from 'lodash';\r\nimport { IListingLocation } from '../../models/listings/ListingLocation';\r\nimport { IError } from '../../models/Error';\r\nimport { IListingDetailed } from '../../models/listings/Listing';\r\n\r\nexport const FETCH_LOCATIONS_SUCCESS = 'FETCH_LOCATIONS_SUCCESS';\r\nexport const FETCH_LOCATIONS_ERROR = 'FETCH_LOCATIONS_ERROR';\r\n\r\nexport const fetchLocations = () => {\r\n    return function (dispatch: Dispatch): Promise<IListingLocation[]> {\r\n        dispatch(isFetching(true));\r\n\r\n        const promise = listingsApiClient.getLocations();\r\n\r\n        promise\r\n            .then((data: IListingLocation[]) => {\r\n                dispatch(fetchLocationsSuccess(_.groupBy(data, 'ngId')));\r\n                dispatch(isFetching(false));\r\n            })\r\n            .catch((error: IError) => {\r\n                dispatch(fetchLocationsError(error));\r\n                dispatch(isFetching(false));\r\n            });\r\n\r\n        return promise;\r\n    }\r\n};\r\n\r\nexport const fetchLocationsSuccess = (locations: _.Dictionary<IListingLocation[]>): IReduxAction => ({\r\n    type: FETCH_LOCATIONS_SUCCESS,\r\n    payload: locations,\r\n});\r\n\r\nexport const fetchLocationsError = (error: IError): IReduxAction => ({\r\n    type: FETCH_LOCATIONS_ERROR,\r\n    payload: error,\r\n});\r\n\r\nexport const FETCH_LISTING_DETAILED_SUCCESS = 'FETCH_LISTING_DETAILED_SUCCESS';\r\nexport const FETCH_LISTING_DETAILED_ERROR = 'FETCH_LISTING_DETAILED_ERROR';\r\n\r\nexport const fetchListingDetailed = (id: number | null) => {\r\n    return function (dispatch: Dispatch): Promise<IListingDetailed> | void {\r\n        if(!id) {\r\n            dispatch(fetchListingDetailedSuccess(null));\r\n            return;\r\n        }\r\n\r\n        const promise = listingsApiClient.getListingDetailed(id);\r\n\r\n        promise\r\n            .then(listing => dispatch(fetchListingDetailedSuccess(listing)))\r\n            .catch(err => dispatch(fetchListingDetailedError(err)));\r\n\r\n        return promise;\r\n    }\r\n};\r\n\r\nexport const fetchListingDetailedSuccess = (listing: IListingDetailed | null): IReduxAction => ({\r\n    type: FETCH_LISTING_DETAILED_SUCCESS,\r\n    payload: listing\r\n});\r\n\r\nexport const fetchListingDetailedError = (error: IError): IReduxAction => ({\r\n    type: FETCH_LISTING_DETAILED_ERROR,\r\n    payload: error\r\n});\r\n","import { IError } from \"../../models/Error\";\r\nimport { INeighborhoodReport, INeighborhoodDetailed, IReportsData } from \"../../models/neighborhoods/neighborhood\";\r\n\r\nexport interface INeighborhoodsState {\r\n    detailedList: _.Dictionary<INeighborhoodDetailed> | null,\r\n    ngReports: IReportsData | null,\r\n    allReports: _.Dictionary<INeighborhoodReport> | null,\r\n    fetchError: IError | null,\r\n}\r\n\r\nexport const initialNeighborhoodsState: INeighborhoodsState = {\r\n    detailedList: null,\r\n    ngReports: null,\r\n    allReports: null,\r\n    fetchError: null\r\n}\r\n","import httpClient from './httpClient';\r\nimport { INeighborhoodDetailed, IReportsData, INeighborhoodReport, INeighborhood } from '../models/neighborhoods/neighborhood';\r\nimport INeghborhoodReportByAllTypesOfRatingDto from '../dtos/INeighborhoodReportByAllTypesOfRatingDto';\r\nimport INeighborhoodPriceReport from '../dtos/INeighborhoodPriceReport';\r\nimport INeighborhoodAvailabilityReport from '../dtos/INeighborhoodAvailabilityReport';\r\nimport { apiBaseUrl } from './listingsApi';\r\n\r\nclass neighborhoodsApi {\r\n    getNeighborhoodsDetailed() {\r\n        return httpClient.get<INeighborhoodDetailed[]>(apiBaseUrl + '/neighborhoods');\r\n    }\r\n\r\n    getReports(id: number) {\r\n        return httpClient.get<IReportsData>(`${apiBaseUrl}/neighborhoods/${id}/reports`);\r\n    }\r\n\r\n    getAllReports() {\r\n        return httpClient.get<INeighborhoodReport[]>(apiBaseUrl + '/neighborhoods/reports');\r\n\t}\r\n\t\r\n\tgetAllNeighborhoodsSimple(){\r\n\t\treturn httpClient.get<INeighborhood[]>(apiBaseUrl + '/neighborhoods/simple');\r\n\t}\r\n\r\n\tgetAllTypesOfRatingReportsByNgId(id: number){\r\n\t\treturn httpClient.get<INeghborhoodReportByAllTypesOfRatingDto>(apiBaseUrl + `/neighborhoods/${id}/reports/rating`);\r\n\t}\r\n\r\n\tgetPriceReportsByNgId(id: number){\r\n\t\treturn httpClient.get<INeighborhoodPriceReport>(apiBaseUrl + `/neighborhoods/${id}/reports/price`);\r\n\t}\r\n\r\n\tgetAvailabilityReportsByNgId(id: number){\r\n\t\treturn httpClient.get<INeighborhoodAvailabilityReport>(apiBaseUrl + `/neighborhoods/${id}/reports/availability`);\r\n\t}\r\n}\r\n\r\nconst neighborhoodsApiClient = new neighborhoodsApi();\r\nexport default neighborhoodsApiClient;\r\n","import { Dispatch } from 'redux';\r\nimport neighborhoodsApiClient from '../../api/neighborhoodsApi';\r\nimport * as _ from 'lodash';\r\nimport { INeighborhoodDetailed, IReportsData, INeighborhoodReport } from '../../models/neighborhoods/neighborhood';\r\nimport { IError } from '../../models/Error';\r\nimport { IReduxAction } from '../../models/ReduxAction';\r\n\r\nexport const FETCH_NEIGHBORHOODS_DETAILED_SUCCESS = 'FETCH_NEIGHBORHOODS_DETAILED_SUCCESS';\r\nexport const FETCH_NEIGHBORHOODS_ERROR = 'FETCH_NEIGHBORHOODS_ERROR';\r\n\r\nexport const fetchNeighborhoodsDetailed = () => {\r\n    return function (dispatch: Dispatch): Promise<INeighborhoodDetailed[]> {\r\n        const promise = neighborhoodsApiClient.getNeighborhoodsDetailed();\r\n\r\n        promise\r\n            .then((data: INeighborhoodDetailed[]) => {\r\n                dispatch(fetchNeighborhoodsDetailedSuccess(_.keyBy(data, 'id')))\r\n            })\r\n            .catch((error: IError) => {\r\n                dispatch(fetchNeighborhoodsError(error))\r\n            });\r\n\r\n        return promise;\r\n    }\r\n}\r\n\r\nexport const fetchNeighborhoodsDetailedSuccess = (neighborhoods: _.Dictionary<INeighborhoodDetailed>): IReduxAction => ({\r\n    type: FETCH_NEIGHBORHOODS_DETAILED_SUCCESS,\r\n    payload: neighborhoods\r\n});\r\n\r\nexport const fetchNeighborhoodsError = (error: IError): IReduxAction => ({\r\n    type: FETCH_NEIGHBORHOODS_ERROR,\r\n    payload: error\r\n});\r\n\r\nexport const FETCH_NG_REPORTS_SUCCESS = 'FETCH_NG_REPORTS_SUCCESS';\r\nexport const FETCH_NG_REPORTS_ERROR = 'FETCH_NG_REPORTS_ERROR';\r\n\r\nexport const fetchNeighborhoodReports = (neighborhoodId: number) => {\r\n    return function (dispatch: Dispatch): Promise<IReportsData> {\r\n        const promise = neighborhoodsApiClient.getReports(neighborhoodId);\r\n\r\n        promise\r\n            .then((data) => {\r\n                dispatch(fetchNgReportsSuccess(data));\r\n            })\r\n            .catch((error: IError) => {\r\n                dispatch(fetchNgReportsError(error));\r\n            });\r\n\r\n        return promise;\r\n    }\r\n};\r\n\r\nexport const fetchNgReportsSuccess = (reports: IReportsData) => ({\r\n    type: FETCH_NG_REPORTS_SUCCESS,\r\n    payload: reports\r\n});\r\n\r\nexport const fetchNgReportsError = (error: IError) => ({\r\n    type: FETCH_NG_REPORTS_ERROR,\r\n    payload: error\r\n});\r\n\r\nexport const FETCH_ALL_REPORTS_SUCCESS = 'FETCH_ALL_REPORTS_SUCCESS';\r\nexport const FETCH_ALL_REPORTS_ERROR = 'FETCH_ALL_REPORTS_ERROR';\r\n\r\nexport const fetchAllReports = () => {\r\n    return function (dispatch: Dispatch): Promise<INeighborhoodReport[]> {\r\n        const promise = neighborhoodsApiClient.getAllReports();\r\n\r\n        promise\r\n            .then((data) => {\r\n                dispatch(fetchAllReportsSuccess(_.keyBy(data, 'id')));\r\n            })\r\n            .catch((error: IError) => {\r\n                dispatch(fetchAllReportsError(error));\r\n            });\r\n\r\n        return promise;\r\n    }\r\n};\r\n\r\nexport const fetchAllReportsSuccess = (reports: _.Dictionary<INeighborhoodReport>) => ({\r\n    type: FETCH_ALL_REPORTS_SUCCESS,\r\n    payload: reports\r\n});\r\n\r\nexport const fetchAllReportsError = (error: IError) => ({\r\n    type: FETCH_ALL_REPORTS_ERROR,\r\n    payload: error\r\n});","\r\nexport interface ICommonState {\r\n    isFetching: boolean\r\n}\r\n\r\nexport const initialCommonState: ICommonState = {\r\n    isFetching: false\r\n}","import { IListing } from \"../../models/listings/Listing\";\r\nimport { IError } from \"../../models/Error\";\r\nimport { IFilters } from \"../../models/grid/filtersData\";\r\n\r\nexport interface IListingsGridState extends IFilters {\r\n    fetchFiltersDataError: IError | null,\r\n    fetchListingsError: IError | null,\r\n    listings: IListing[] | null,\r\n    pageSize: number,\r\n    currentPage: number,\r\n    orderBy: string,\r\n    order: 'asc' | 'desc',\r\n    fromDate?: string,\r\n    toDate?: string,\r\n    fromPrice?: number,\r\n    toPrice?: number,\r\n    totalCount: number,\r\n    numberOfPages: number,\r\n}\r\n\r\nexport const initialListingsGridState: IListingsGridState = {\r\n    roomTypeFilter: {},\r\n    propertyTypeFilter: {},\r\n    neighborhoodFilter: {},\r\n    fetchFiltersDataError: null,\r\n    fetchListingsError: null,\r\n    listings: null,\r\n    pageSize: 10,\r\n    currentPage: 0,\r\n    totalCount: 0,\r\n    numberOfPages: 0,\r\n    orderBy: '',\r\n    order: 'asc'\r\n}","import { Dispatch } from 'redux';\r\nimport listingsApiClient from '../../api/listingsApi';\r\nimport { IApplicationState } from '../store';\r\nimport { IListing } from '../../models/listings/Listing';\r\nimport { IError } from '../../models/Error';\r\nimport { IReduxAction } from '../../models/ReduxAction';\r\nimport { IFiltersDataCollections, IFilters } from '../../models/grid/filtersData';\r\n\r\nexport const FETCH_TABLE_DATA_SUCCESS = 'FETCH_TABLE_DATA_SUCCESS';\r\nexport const FETCH_TABLE_DATA_ERROR = 'FETCH_TABLE_DATA_ERROR';\r\n\r\nexport const orderByDictionary: {[ordering: string]: number} = {\r\n    'price_asc': 1,\r\n    'accommodates_asc': 2,\r\n    'rating_asc': 3,\r\n    'price_desc': 4,\r\n    'accommodates_desc': 5,\r\n    'rating_desc': 6\r\n}\r\n\r\nexport const fetchTableData = () => {\r\n    return function (dispatch: Dispatch, getState: () => IApplicationState): Promise<{total_count: number, listings: IListing[]}> {\r\n        const { currentPage, pageSize, propertyTypeFilter, roomTypeFilter, neighborhoodFilter, fromDate, toDate, fromPrice, toPrice, orderBy, order } = getState().listingsGrid;\r\n        const take = pageSize;\r\n        const skip = currentPage * pageSize;\r\n        const propTypes = Object.keys(propertyTypeFilter)\r\n            .filter(key => propertyTypeFilter[key].checked)\r\n            .map(id => +id);\r\n        const roomTypes = Object.keys(roomTypeFilter)\r\n            .filter(key => roomTypeFilter[key].checked)\r\n            .map(id => +id);\r\n        const ngs = Object.keys(neighborhoodFilter)\r\n            .filter(key => neighborhoodFilter[key].checked)\r\n            .map(id => +id);\r\n        const ord = orderByDictionary[`${orderBy}_${order}`] || 0;\r\n\r\n        const promise = listingsApiClient.getAllListings(skip, take, ngs, propTypes, roomTypes, fromDate, toDate, fromPrice, toPrice, ord);\r\n\r\n        promise.then((data: {total_count: number, listings: IListing[]}) => {\r\n            dispatch(fetchTableDataSuccess(data));\r\n        }).catch((err: IError) => {\r\n            dispatch(fetchTableDataError(err));\r\n        });\r\n\r\n        return promise;\r\n    }\r\n}\r\n\r\nexport const fetchTableDataSuccess = (data: {total_count: number, listings: IListing[]}): IReduxAction => ({\r\n    type: FETCH_TABLE_DATA_SUCCESS,\r\n    payload: data\r\n});\r\n\r\nexport const fetchTableDataError = (error: IError): IReduxAction => ({\r\n    type: FETCH_TABLE_DATA_ERROR,\r\n    payload: error\r\n});\r\n\r\nexport const FETCH_FILTERS_DATA_SUCCESS = 'FETCH_FILTERS_DATA_SUCCESS';\r\nexport const FETCH_FILTERS_DATA_ERROR = 'FETCH_FILTERS_DATA_ERROR';\r\n\r\nexport const fetchFiltersData = () => {\r\n    return function (dispatch: Dispatch): Promise<IFiltersDataCollections> {\r\n        const promise = listingsApiClient.getFiltersData();\r\n\r\n        promise\r\n            .then((data: IFiltersDataCollections) => {\r\n                let filters: IFilters = {\r\n                    roomTypeFilter: {},\r\n                    propertyTypeFilter: {},\r\n                    neighborhoodFilter: {}\r\n                };\r\n\r\n                data.roomTypes.forEach(rt => {\r\n                    filters.roomTypeFilter[rt.id.toString()] = { ...rt, checked: false }\r\n                });\r\n                data.propertyTypes.forEach(pt => {\r\n                    filters.propertyTypeFilter[pt.id.toString()] = { ...pt, checked: false }\r\n                });\r\n                data.neighborhoods.forEach(ng => {\r\n                    filters.neighborhoodFilter[ng.id.toString()] = { ...ng, checked: false }\r\n                })\r\n\r\n                dispatch(fetchFiltersDataSuccess(filters));\r\n            })\r\n            .catch((error: IError) => {\r\n                dispatch(fetchFiltersDataError(error))\r\n            });\r\n\r\n        return promise;\r\n    }\r\n};\r\n\r\nexport const fetchFiltersDataSuccess = (payload: IFilters): IReduxAction => ({\r\n    type: FETCH_FILTERS_DATA_SUCCESS,\r\n    payload\r\n});\r\n\r\nexport const fetchFiltersDataError = (error: IError): IReduxAction => ({\r\n    type: FETCH_FILTERS_DATA_ERROR,\r\n    payload: error\r\n});\r\n\r\nexport const SET_NEIGHBORHOODS_FILTER = 'SET_NEIGHBORHOODS_FILTER';\r\nexport const SET_PROPERTY_TYPES_FILTER = 'SET_PROPERTY_TYPES_FILTER';\r\nexport const SET_ROOM_TYPES_FILTER = 'SET_ROOM_TYPES_FILTER';\r\nexport const SET_PAGE_SIZE = 'SET_PAGE_SIZE';\r\nexport const SET_PAGE = 'SET_PAGE';\r\nexport const SET_ORDER = 'SET_ORDER';\r\nexport const SET_ORDERBY = 'SET_ORDERBY';\r\nexport const SET_FROM_DATE = 'SET_FROM_DATE';\r\nexport const SET_TO_DATE = 'SET_TO_DATE';\r\nexport const SET_FROM_PRICE = 'SET_FROM_PRICE';\r\nexport const SET_TO_PRICE = 'SET_TO_PRICE';\r\nexport const CLEAR_FILTERS = 'CLEAR_FILTERS';\r\n\r\nexport const setNeighborhoodsFilter = (id: string, checked: boolean): IReduxAction => ({\r\n    type: SET_NEIGHBORHOODS_FILTER,\r\n    payload: { id, checked }\r\n});\r\n\r\nexport const setRoomTypesFilter = (id: string, checked: boolean): IReduxAction => ({\r\n    type: SET_ROOM_TYPES_FILTER,\r\n    payload: { id, checked }\r\n});\r\n\r\nexport const setPropertyTypesFilter = (id: string, checked: boolean): IReduxAction => ({\r\n    type: SET_PROPERTY_TYPES_FILTER,\r\n    payload: { id, checked }\r\n});\r\n\r\nexport const setPage = (page: number): IReduxAction => ({\r\n    type: SET_PAGE,\r\n    payload: page\r\n});\r\n\r\nexport const setPageSize = (size: number): IReduxAction => ({\r\n    type: SET_PAGE_SIZE,\r\n    payload: size\r\n});\r\n\r\nexport const setOrder = (order: 'desc' | 'asc'): IReduxAction => ({\r\n    type: SET_ORDER,\r\n    payload: order\r\n});\r\n\r\nexport const setOrderBy = (orderBy: string): IReduxAction => ({\r\n    type: SET_ORDERBY,\r\n    payload: orderBy\r\n});\r\n\r\nexport const setFromDate = (date: string): IReduxAction => ({\r\n    type: SET_FROM_DATE,\r\n    payload: date\r\n});\r\n\r\nexport const setToDate = (date: string): IReduxAction => ({\r\n    type: SET_TO_DATE,\r\n    payload: date\r\n});\r\n\r\nexport const setFromPrice = (price: number): IReduxAction => ({\r\n    type: SET_FROM_PRICE,\r\n    payload: price\r\n});\r\n\r\nexport const setToPrice = (price: number): IReduxAction => ({\r\n    type: SET_TO_PRICE,\r\n    payload: price\r\n});\r\n\r\nexport const clearFilters = (): IReduxAction => ({\r\n    type: CLEAR_FILTERS,\r\n});\r\n","import { IListingsGridState, initialListingsGridState } from '../state/listingsGridState';\r\nimport { FETCH_FILTERS_DATA_ERROR, FETCH_FILTERS_DATA_SUCCESS,\r\n         SET_NEIGHBORHOODS_FILTER, SET_PROPERTY_TYPES_FILTER,\r\n         SET_ROOM_TYPES_FILTER, FETCH_TABLE_DATA_SUCCESS,\r\n         FETCH_TABLE_DATA_ERROR, SET_PAGE, SET_PAGE_SIZE, \r\n         CLEAR_FILTERS, SET_ORDER, SET_ORDERBY, SET_FROM_DATE, SET_TO_DATE, SET_FROM_PRICE, SET_TO_PRICE } from '../actions/listingsGridActions';\r\nimport { IReduxAction } from '../../models/ReduxAction';\r\n\r\nexport const deepClone = (obj: object) => {\r\n    return JSON.parse(JSON.stringify(obj));\r\n}\r\n\r\nexport const listingsGridReducer = (state: IListingsGridState = initialListingsGridState, action: IReduxAction): IListingsGridState => {\r\n    switch (action.type) {\r\n        case FETCH_FILTERS_DATA_SUCCESS:\r\n            return { ...state, ...action.payload, fetchFiltersDataError: null };\r\n        case FETCH_FILTERS_DATA_ERROR:\r\n            return { ...state, fetchFiltersDataError: action.payload, roomTypeFilter: {}, propertyTypeFilter: {}, neighborhoodFilter: {} };\r\n        case SET_NEIGHBORHOODS_FILTER:\r\n            const { id: ngId, checked: ngChecked } = action.payload;\r\n            const ngFilter = deepClone(state.neighborhoodFilter);\r\n            if (ngFilter[ngId]) {\r\n                ngFilter[ngId].checked = ngChecked;\r\n            }\r\n            return { ...state, neighborhoodFilter: ngFilter };\r\n        case SET_PROPERTY_TYPES_FILTER:\r\n            const { id: ptId, checked: ptChecked } = action.payload;\r\n            const ptFilter = deepClone(state.propertyTypeFilter);\r\n            if (ptFilter[ptId]) {\r\n                ptFilter[ptId].checked = ptChecked;\r\n            }\r\n            return { ...state, propertyTypeFilter: ptFilter };\r\n        case SET_ROOM_TYPES_FILTER:\r\n            const { id: rtId, checked: rtChecked } = action.payload;\r\n            const rtFilter = deepClone(state.roomTypeFilter);\r\n            if (rtFilter[rtId]) {\r\n                rtFilter[rtId].checked = rtChecked;\r\n            }\r\n            return { ...state, roomTypeFilter: rtFilter };\r\n        case SET_PAGE:\r\n            return { ...state, currentPage: action.payload };\r\n        case SET_PAGE_SIZE:\r\n            return { ...state, pageSize: action.payload };\r\n        case SET_ORDER:\r\n            return { ...state, order: action.payload };\r\n        case SET_ORDERBY:\r\n            return { ...state, orderBy: action.payload };\r\n        case SET_FROM_DATE:\r\n            return { ...state, fromDate: action.payload };\r\n        case SET_TO_DATE:\r\n            return { ...state, toDate: action.payload };\r\n        case SET_FROM_PRICE:\r\n            return { ...state, fromPrice: action.payload };\r\n        case SET_TO_PRICE:\r\n            return { ...state, toPrice: action.payload };\r\n        case CLEAR_FILTERS:\r\n            let ngFilterNew = deepClone(state.neighborhoodFilter);\r\n            let rtFilterNew = deepClone(state.roomTypeFilter);\r\n            let ptFilterNew = deepClone(state.propertyTypeFilter);\r\n\r\n            Object.keys(ngFilterNew).forEach(key => ngFilterNew[key].checked = false);\r\n            Object.keys(rtFilterNew).forEach(key => rtFilterNew[key].checked = false);\r\n            Object.keys(ptFilterNew).forEach(key => ptFilterNew[key].checked = false);\r\n\r\n            return { ...state,\r\n                    neighborhoodFilter: ngFilterNew,\r\n                    roomTypeFilter: rtFilterNew,\r\n                    propertyTypeFilter: ptFilterNew,\r\n                    fromDate: undefined,\r\n                    toDate: undefined,\r\n                    fromPrice: undefined,\r\n                    toPrice: undefined,\r\n                    orderBy: '' };\r\n        case FETCH_TABLE_DATA_SUCCESS:\r\n            const { total_count, listings } = action.payload;\r\n            let numberOfPages = Math.ceil(total_count / state.pageSize);\r\n            if (numberOfPages < 0) {\r\n                numberOfPages = 0;\r\n            }\r\n            return { ...state, listings, numberOfPages, totalCount: total_count };\r\n        case FETCH_TABLE_DATA_ERROR:\r\n            return { ...state, fetchListingsError: action.payload, listings: null, totalCount: 0, numberOfPages: 0, currentPage: 0 };\r\n    }\r\n\r\n    return state;\r\n}\r\n","import { IProfilePayload } from \"../../models/auth/IProfilePayload\";\r\n\r\n\r\nexport interface IAuthState {\r\n    idToken?: string;\r\n    accessToken?: string;\r\n    idTokenPayload?: IProfilePayload;\r\n    expiresAt?: number;\r\n    appState?: any;\r\n    silentAuthInProgress: boolean;\r\n    authError?: any;\r\n}\r\n\r\nexport const initialAuthState: IAuthState = {\r\n    silentAuthInProgress: true\r\n};","import { combineReducers } from 'redux';\r\nimport { listingsReducer } from './reducers/listingsReducer';\r\nimport { neighborhoodsReducer } from './reducers/neighborhoodsReducer';\r\nimport { commonReducer } from './reducers/commonReducer';\r\nimport { listingsGridReducer } from './reducers/listingsGridReducer';\r\nimport { authReducer } from './reducers/authReducer';\r\n\r\nexport default combineReducers({\r\n    listings: listingsReducer,\r\n    neighborhoods: neighborhoodsReducer,\r\n    common: commonReducer,\r\n    listingsGrid: listingsGridReducer,\r\n    auth: authReducer\r\n});\r\n","import { IReduxAction } from '../../models/ReduxAction';\r\nimport { IListingsState, initialListingsState } from '../state/listingsState';\r\nimport { FETCH_LOCATIONS_SUCCESS, FETCH_LOCATIONS_ERROR, FETCH_LISTING_DETAILED_SUCCESS, FETCH_LISTING_DETAILED_ERROR } from '../actions/listingsActions';\r\n\r\nexport const listingsReducer = (state: IListingsState = initialListingsState, action: IReduxAction): IListingsState => {\r\n    switch (action.type) {\r\n        case FETCH_LOCATIONS_SUCCESS:\r\n            return { ...state, locations: action.payload, fetchListError: null };\r\n        case FETCH_LOCATIONS_ERROR:\r\n            return { ...state, fetchListError: action.payload, locations: null };\r\n        case FETCH_LISTING_DETAILED_SUCCESS:\r\n            return { ...state, item: action.payload, fetchListingError: null };\r\n        case FETCH_LISTING_DETAILED_ERROR:\r\n            return { ...state, item: null, fetchListingError: action.payload };\r\n    }\r\n    return state;\r\n}\r\n","import { INeighborhoodsState, initialNeighborhoodsState } from '../state/neighborhoodsState';\r\nimport { FETCH_NEIGHBORHOODS_DETAILED_SUCCESS, FETCH_NEIGHBORHOODS_ERROR, FETCH_NG_REPORTS_ERROR, FETCH_NG_REPORTS_SUCCESS, FETCH_ALL_REPORTS_SUCCESS, FETCH_ALL_REPORTS_ERROR } from '../actions/neighborhoodsActions';\r\nimport { IReduxAction } from '../../models/ReduxAction';\r\n\r\nexport const neighborhoodsReducer = (state: INeighborhoodsState = initialNeighborhoodsState, action: IReduxAction): INeighborhoodsState => {\r\n    switch (action.type) {\r\n        case FETCH_NEIGHBORHOODS_DETAILED_SUCCESS:\r\n            return { ...state, detailedList: action.payload, fetchError: null };\r\n        case FETCH_NEIGHBORHOODS_ERROR:\r\n            return { ...state, detailedList: null, fetchError: action.payload };\r\n        case FETCH_NG_REPORTS_SUCCESS:\r\n            return { ...state, ngReports: action.payload, fetchError: null };\r\n        case FETCH_NG_REPORTS_ERROR:\r\n            return { ...state, ngReports: null, fetchError: action.payload };\r\n        case FETCH_ALL_REPORTS_SUCCESS:\r\n            return { ...state, allReports: action.payload, fetchError: null };\r\n        case FETCH_ALL_REPORTS_ERROR:\r\n            return { ...state, allReports: null, fetchError: action.payload };\r\n    }\r\n\r\n    return state;\r\n}","import { ICommonState, initialCommonState } from '../state/commonState';\r\nimport { IS_FETCHING } from '../actions/commonActions';\r\nimport { IReduxAction } from '../../models/ReduxAction';\r\n\r\nexport const commonReducer = (state: ICommonState = initialCommonState, action: IReduxAction): ICommonState => {\r\n    switch(action.type){\r\n        case IS_FETCHING:\r\n            return {...state, isFetching: action.payload};\r\n    }\r\n\r\n    return state;\r\n}","\r\nimport { IAuthState, initialAuthState } from '../state/authState';\r\nimport { AUTH_SUCCESS, AUTH_ERROR, SIGN_OUT_SUCCESS, SILENT_AUTH_END, SILENT_AUTH_START, SILENT_AUTH_ERROR, SILENT_AUTH_SUCCESS, isAuthenticated } from '../actions/authActions';\r\nimport { IReduxAction } from '../../models/ReduxAction';\r\n\r\nexport const authReducer = (state: IAuthState = initialAuthState, action: IReduxAction): IAuthState => {\r\n    switch (action.type) {\r\n        case AUTH_SUCCESS:\r\n        case SILENT_AUTH_SUCCESS:\r\n            const { idToken, idTokenPayload, appState, expiresIn, accessToken } = action.payload;\r\n            const expiresAt = (expiresIn * 1000) + new Date().getTime();\r\n            return { ...state, authError: null, idToken: idToken, idTokenPayload, appState, expiresAt, accessToken };\r\n        case AUTH_ERROR:\r\n        case SILENT_AUTH_ERROR:\r\n            return { ...state, authError: action.payload, idToken: undefined, expiresAt: undefined, idTokenPayload: undefined };\r\n        case SIGN_OUT_SUCCESS:\r\n            return { ...state, authError: undefined, idToken: undefined, expiresAt: undefined, idTokenPayload: undefined };\r\n        case SILENT_AUTH_END:\r\n            return { ...state, silentAuthInProgress: false };\r\n        case SILENT_AUTH_START:\r\n            return { ...state, silentAuthInProgress: true };\r\n    }\r\n\r\n    return state;\r\n}","import { IListingsState, initialListingsState } from './state/listingsState';\r\nimport { createStore, applyMiddleware, compose } from 'redux';\r\nimport rootReducer from './rootReducer';\r\nimport thunk from 'redux-thunk'\r\nimport { INeighborhoodsState, initialNeighborhoodsState } from './state/neighborhoodsState';\r\nimport { ICommonState, initialCommonState } from './state/commonState';\r\nimport { composeWithDevTools } from 'redux-devtools-extension';\r\nimport { IListingsGridState, initialListingsGridState } from './state/listingsGridState';\r\nimport { IAuthState, initialAuthState } from './state/authState';\r\n\r\nexport interface IApplicationState {\r\n    listings: IListingsState,\r\n    neighborhoods: INeighborhoodsState,\r\n    common: ICommonState,\r\n    listingsGrid: IListingsGridState,\r\n    auth: IAuthState,\r\n}\r\n\r\nexport const initialAppState: IApplicationState = {\r\n    listings: initialListingsState,\r\n    neighborhoods: initialNeighborhoodsState,\r\n    common: initialCommonState,\r\n    listingsGrid: initialListingsGridState,\r\n    auth: initialAuthState,\r\n}\r\n\r\nconst store = createStore(\r\n    rootReducer,\r\n    initialAppState,\r\n    composeWithDevTools(\r\n        applyMiddleware(thunk),\r\n    )\r\n);\r\n\r\nexport default store;\r\n\r\n","import * as React from 'react';\r\nimport { Theme, createStyles, WithStyles, withStyles } from '@material-ui/core';\r\nimport PlaceRounded from '@material-ui/icons/PlaceRounded'\r\n\r\nconst styles = (theme: Theme) => createStyles({\r\n    tooltip: {\r\n        backgroundColor: 'white',\r\n        color: 'black',\r\n        padding: '10px',\r\n        position: 'absolute',\r\n        zIndex: 99999,\r\n        pointerEvents: 'none',\r\n        opacity: 0.9,\r\n        borderRadius: '5px',\r\n    },\r\n    icon: {\r\n        color: 'rgb(65, 62, 160);'\r\n    }\r\n});\r\n\r\nexport interface INeighTooltipProps {\r\n    x: number;\r\n    y: number;\r\n    ngName: string;\r\n    listCount: number;\r\n}\r\n\r\nconst NeighTooltip: React.SFC<INeighTooltipProps & WithStyles<typeof styles>> = (props) => {\r\n    const { ngName, listCount, x, y, classes: { tooltip, icon } } = props;\r\n\r\n    let pos: any = {};\r\n    let xPos = 'left';\r\n    let xVal = x;\r\n    let yPos = 'top';\r\n    let yVal = y;\r\n    const { innerWidth: width, innerHeight: height } = window;\r\n    \r\n    if (width - x < 200) {\r\n        xPos = 'right';\r\n        xVal = width - x;\r\n    } \r\n    if (height - y < 60) {\r\n        yPos = 'bottom';\r\n        yVal = height - y;\r\n    }\r\n\r\n    pos[xPos] = xVal;\r\n    pos[yPos] = yVal;\r\n\r\n    return <div className={tooltip} style={pos}>\r\n        <div style={{ display: 'flex', alignItems: 'center', marginRight: '10px' }}>\r\n            <div><PlaceRounded fontSize=\"large\" classes={{ root: icon }} /></div>\r\n            <div>\r\n                <div>{ngName}</div>\r\n                <div>listings: {listCount}</div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n}\r\n\r\nexport default withStyles(styles)(NeighTooltip);","import * as React from 'react';\r\nimport { PieChart, Pie, Legend, Tooltip, Cell } from 'recharts';\r\nimport { ITypeReport } from '../../../models/neighborhoods/neighborhood';\r\n\r\nconst colors = ['#00c49f', '#ffbb28', '#ff8042', '#f71348', '#413ea0'];\r\n\r\ninterface Props {\r\n    width: number;\r\n    height: number;\r\n    innerRadius: number;\r\n    outerRadius: number;\r\n    cx?: string | number;\r\n    cy?: string | number;\r\n    ngListingsByType: ITypeReport[];\r\n}\r\n\r\nexport default (props: Props) => {\r\n    const { width, height, ngListingsByType, cx, cy, outerRadius, innerRadius } = props;\r\n    const widthPixels = width.toString() + 'px';\r\n    let reports = ngListingsByType;\r\n\r\n    if (reports.length >= 5) {\r\n        // combine all after the 4th to one\r\n        reports = props.ngListingsByType\r\n            .sort((a, b) => b.count - a.count)\r\n            .slice(0, 4);\r\n\r\n        const other = ngListingsByType\r\n            .sort((a, b) => b.count - a.count)\r\n            .slice(4, ngListingsByType.length)\r\n            .reduce<ITypeReport>((prevValue, currentValue) => {\r\n                prevValue.count += currentValue.count;\r\n                return prevValue;\r\n            }, { id: 0, type: 'Other', count: 0 });\r\n\r\n        reports.push(other);\r\n    }\r\n\r\n    return (\r\n        <PieChart width={width} height={height}>\r\n            <Pie\r\n                legendType=\"square\"\r\n                dataKey=\"count\"\r\n                nameKey=\"type\"\r\n                data={reports}\r\n                cy={cy}\r\n                cx={cx}\r\n                innerRadius={innerRadius}\r\n                outerRadius={outerRadius}\r\n                // fill=\"#82ca9d\"\r\n                paddingAngle={2}\r\n                minAngle={1}\r\n                label>\r\n                {\r\n                    reports.map((entry, index) => <Cell fill={colors[index % colors.length]} />)\r\n                }\r\n            </Pie>\r\n            <Legend iconSize={8} verticalAlign=\"bottom\" />\r\n            <Tooltip />\r\n        </PieChart>\r\n    );\r\n}","import * as React from 'react';\r\nimport { BarChart, CartesianGrid, YAxis, Tooltip, Legend, Bar, XAxis, Margin } from 'recharts';\r\nimport { IRatingReport } from '../../../models/neighborhoods/neighborhood';\r\n\r\ninterface Props {\r\n    byRating: IRatingReport[];\r\n    width: number;\r\n    height: number;\r\n    barSize: number;\r\n    margin?: Partial<Margin>;\r\n}\r\n\r\nexport default (props: Props) => {\r\n    const { byRating, width, height, barSize, margin } = props;\r\n\r\n    let reportByRange: any = { };\r\n        for (let i = -1; i < 10; i++) {\r\n            reportByRange[i.toString()] = {\r\n                range: i >= 0 ? `${i * 10 + 1}-${(i + 1) * 10}` : 'NO', // range string or NO for listings without reports\r\n                count: 0 // count of listings in rating range\r\n            }          \r\n        }\r\n\r\n        for (let i = 0; i < byRating.length; i++) {\r\n            const el = byRating[i];\r\n            const rt = el.rating ? Math.floor((el.rating - 1) / 10) : -1;\r\n            reportByRange[rt].count += el.count;\r\n        }\r\n\r\n    const reports = (Object as any).values(reportByRange);\r\n\r\n    const renderLegend = () => {\r\n        return <ul style={{margin: 0, listStyle: 'none'}}>\r\n            <li style={{textAlign: 'center'}}>Rating</li>\r\n        </ul>\r\n    }\r\n\r\n    return (\r\n        <BarChart margin={margin} width={width} height={height} data={reports}>\r\n            <CartesianGrid stroke='#f5f5f5' />\r\n            <XAxis dataKey=\"range\" />\r\n            <YAxis />\r\n            <Tooltip />\r\n            <Legend content={renderLegend} margin={{left: 20, right: 0}} align=\"center\" verticalAlign=\"top\" />\r\n            <Bar dataKey='count' barSize={barSize} fill='#413ea0' />\r\n        </BarChart>\r\n    );\r\n}","import * as React from 'react';\r\nimport Close from '@material-ui/icons/CancelRounded';\r\nimport { Theme, createStyles, WithStyles, withStyles } from '@material-ui/core';\r\n\r\ninterface IPanelProps extends WithStyles<typeof styles> {\r\n    header: string | React.ReactNode;\r\n    clickHandler: () => void\r\n}\r\n\r\nconst styles = (theme: Theme) => createStyles({\r\n    pannel: {\r\n        width: '300px',\r\n        borderRadius: '10px',\r\n        top: '70px',\r\n        right: '20px',\r\n        background: '#fff',\r\n        position: 'absolute',\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n    },\r\n    closeBtn: {\r\n        float: 'right',\r\n        color: 'rgba(32, 35, 42, 0.8)',\r\n        fontSize: '25px',\r\n        marginTop: '2px',\r\n        marginRight: '2px',\r\n        \"&:hover\": {\r\n            color: 'rgba(247, 19, 72, .9)',\r\n            cursor: 'pointer'\r\n        }\r\n    },\r\n    closeBtnContainer: {\r\n        height: '15px'\r\n    },\r\n    content: {\r\n        margin: '7px 12px 7px 12px',\r\n        overflowY: 'auto',\r\n        flexGrow: 1,\r\n    },\r\n    header: {\r\n        fontSize: '1.25em',\r\n        textAlign: 'center',\r\n        padding: '0 20px 0 20px',\r\n        color: 'rgba(32, 35, 42, 0.9)'\r\n    }\r\n});\r\n\r\nclass Pannel extends React.Component<IPanelProps> {\r\n    render() {\r\n        const { classes } = this.props;\r\n        return <div className={classes.pannel}>\r\n            <div className={classes.closeBtnContainer}>\r\n                <Close className={classes.closeBtn} onClick={this.props.clickHandler} />\r\n            </div>\r\n            <div className={classes.header}>\r\n                {this.props.header}\r\n            </div>\r\n            <div className={classes.content}>\r\n                {this.props.children}\r\n            </div>\r\n        </div>\r\n    }\r\n}\r\n\r\nexport default withStyles(styles)(Pannel);","import { Button, Theme, createStyles, WithStyles, MobileStepper, withStyles } from \"@material-ui/core\";\r\nimport * as React from 'react';\r\nimport { KeyboardArrowLeft, KeyboardArrowRight } from '@material-ui/icons';\r\n\r\nconst styles = (theme: Theme) => createStyles({\r\n    btn: {\r\n        color: 'rgba(32, 35, 42, 0.9)',\r\n    },\r\n    btnDisable: {\r\n        color: 'rgba(0, 0, 0, 0.26)',\r\n    },\r\n    dots: {\r\n        backgroundColor: 'rgba(247, 19, 72, .3)',\r\n    },\r\n    dotsActive: {\r\n        backgroundColor: 'rgba(247, 19, 72, .8)',\r\n    }\r\n});\r\n\r\ninterface StepperProps extends WithStyles<typeof styles> {\r\n    activeStep: number;\r\n    stepsCount: number;\r\n    handleNext: () => void;\r\n    handleBack: () => void;\r\n}\r\n\r\nconst Stepper = (props: StepperProps) => {\r\n    const { classes, activeStep, stepsCount, handleNext, handleBack } = props;\r\n    return (\r\n        <MobileStepper\r\n            classes={{ dot: classes.dots, dotActive: classes.dotsActive }}\r\n            variant=\"dots\"\r\n            steps={stepsCount}\r\n            position=\"static\"\r\n            activeStep={activeStep}\r\n            nextButton={\r\n                <Button classes={{ root: classes.btn, disabled: classes.btnDisable }} size=\"small\" onClick={handleNext} disabled={activeStep === stepsCount - 1}>\r\n                    Next<KeyboardArrowRight />\r\n                </Button>\r\n            }\r\n            backButton={\r\n                <Button classes={{ root: classes.btn, disabled: classes.btnDisable }} size=\"small\" onClick={handleBack} disabled={activeStep === 0}>\r\n                    <KeyboardArrowLeft />\r\n                    Back\r\n                </Button>\r\n            }\r\n        />\r\n    );\r\n}\r\n\r\nexport default withStyles(styles)(Stepper);","import { createStyles, Theme, withStyles, WithStyles } from '@material-ui/core';\r\nimport * as React from 'react';\r\nimport NgListingsByTypePieChart from './NgListingsByTypePieChart';\r\nimport NgListingsRatingBarChart from './NgListingsRatingBarChart';\r\nimport { INeighborhoodReport } from '../../../models/neighborhoods/neighborhood';\r\nimport Panel from '../../../components/Panel';\r\nimport Stepper from '../../../components/Stepper';\r\n\r\ninterface NgReportProps extends WithStyles<typeof styles> {\r\n    ng: INeighborhoodReport;\r\n    listingsCount: number;\r\n    onClose: () => void;\r\n}\r\n\r\nconst styles = (theme: Theme) => createStyles({\r\n\r\n})\r\n\r\nclass NgReportPanel extends React.Component<NgReportProps, any> {\r\n    constructor(props: Readonly<NgReportProps>) {\r\n        super(props);\r\n        this.state = { activeStep: 0 };\r\n    }\r\n\r\n    handleNext = () => {\r\n        this.setState((state: any) => ({\r\n            activeStep: state.activeStep + 1,\r\n        }));\r\n    };\r\n\r\n    handleBack = () => {\r\n        this.setState((state: any) => ({\r\n            activeStep: state.activeStep - 1,\r\n        }));\r\n    };\r\n\r\n    header = () => {\r\n        return <div>\r\n            <div>{this.props.ng.name}</div>\r\n            <p style={{margin: 0, textAlign: 'center', fontSize: '15px'}}>\r\n                {'listings: ' + this.props.listingsCount}\r\n            </p>\r\n        </div>\r\n    }\r\n\r\n    render() {\r\n        const { ng, onClose, classes } = this.props;\r\n        return (\r\n            <Panel header={this.header()} clickHandler={onClose}>\r\n                {this.state.activeStep === 0 && <div style={{ width: '274px' }}>\r\n                    <NgListingsRatingBarChart byRating={ng.byRating} width={235} height={280} barSize={20}/>\r\n                </div>}\r\n                {this.state.activeStep === 1 && <div style={{ width: '274px' }}>\r\n                    <NgListingsByTypePieChart\r\n                        ngListingsByType={ng.byPropType}\r\n                        innerRadius={40}\r\n                        outerRadius={80}\r\n                        cy={110}\r\n                        width={274}\r\n                        height={280} />\r\n                </div>}\r\n                {this.state.activeStep === 2 && <div style={{width: '274px'}}>\r\n                    <NgListingsByTypePieChart\r\n                        ngListingsByType={ng.byRoomType}\r\n                        innerRadius={40}\r\n                        outerRadius={80}\r\n                        cy={110}\r\n                        width={274}\r\n                        height={280} />\r\n                </div>}\r\n                <Stepper handleBack={this.handleBack} handleNext={this.handleNext} activeStep={this.state.activeStep} stepsCount={3} />\r\n            </Panel>\r\n        );\r\n    }\r\n}\r\n\r\nclass CustomTooltip extends React.Component<any> {\r\n    render() {\r\n        return (\r\n            <div>\r\n                {this.props.payload.type}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default withStyles(styles)(NgReportPanel);","import * as React from 'react';\r\nimport SvgIcon, { SvgIconProps } from '@material-ui/core/SvgIcon';\r\n\r\nexport default (props: SvgIconProps) => {\r\n  return (\r\n    <SvgIcon {...props}>\r\n      <path d=\"M12.007 0C6.12 0 1.1 4.27.157 10.08c-.944 5.813 2.468 11.45 8.054 13.312.19.064.397.033.555-.084.16-.117.25-.304.244-.5v-2.042c-3.33.735-4.037-1.56-4.037-1.56-.22-.726-.694-1.35-1.334-1.756-1.096-.75.074-.735.074-.735.773.103 1.454.557 1.846 1.23.694 1.21 2.23 1.638 3.45.96.056-.61.327-1.178.766-1.605-2.67-.3-5.462-1.335-5.462-6.002-.02-1.193.42-2.35 1.23-3.226-.327-1.015-.27-2.116.166-3.09 0 0 1.006-.33 3.3 1.23 1.966-.538 4.04-.538 6.003 0 2.295-1.5 3.3-1.23 3.3-1.23.445 1.006.49 2.144.12 3.18.81.877 1.25 2.033 1.23 3.226 0 4.607-2.805 5.627-5.476 5.927.578.583.88 1.386.825 2.206v3.29c-.005.2.092.393.26.507.164.115.377.14.565.063 5.568-1.88 8.956-7.514 8.007-13.313C22.892 4.267 17.884.007 12.008 0z\" />\r\n    </SvgIcon>\r\n  );\r\n}","import * as React from 'react';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport { withStyles, Theme, WithStyles, createStyles } from '@material-ui/core/styles';\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\nimport Button from '@material-ui/core/Button';\r\nimport Drawer from '@material-ui/core/Drawer';\r\nimport { RouteComponentProps, withRouter } from 'react-router';\r\nimport { Link } from 'react-router-dom';\r\nimport { AccountCircle } from '@material-ui/icons';\r\nimport GithubIcon from '../../components/icnos/GithubIcon';\r\nimport { IProfilePayload } from '../../models/auth/IProfilePayload';\r\n\r\nconst styles = (theme: Theme) => createStyles({\r\n    navBar: {\r\n        width: '100%',\r\n        backgroundColor: 'rgba(32, 35, 42, 0.8)',\r\n\t\theight: '56px',\r\n\t\ttop: 0,\r\n        zIndex: 1301,\r\n    },\r\n    toolbar: {\r\n        minHeight: '56px'\r\n    },\r\n    grow: {\r\n        flexGrow: 1,\r\n    },\r\n    nopad: {\r\n        padding: 0,\r\n    },\r\n    avatar: {\r\n        backgroundColor: 'white',\r\n        display: 'inline-flex',\r\n        fontSize: '1.35em',\r\n        width: '40px',\r\n        height: '40px',\r\n    },\r\n    logoText: {\r\n        paddingRight: '30px',\r\n        paddingLeft: '0',\r\n        color: 'white',\r\n        fontWeight: 'bold',\r\n        display: 'block',\r\n        '@media screen and (max-width: 700px)': {\r\n            display: 'none',\r\n        },\r\n    },\r\n    menuItem: {\r\n        display: 'block',\r\n        '@media screen and (max-width: 700px)': {\r\n            display: 'none',\r\n        },\r\n        textTransform: 'none',\r\n        fontSize: '17px',\r\n        fontWeight: 'normal'\r\n    },\r\n    logInOutBtn: {\r\n        display: 'block',\r\n        textTransform: 'none',\r\n        fontSize: '17px',\r\n        fontWeight: 'normal'\r\n    },\r\n    menuList: {\r\n        display: 'none',\r\n        '@media screen and (max-width: 700px)': {\r\n            display: 'block',\r\n        },\r\n    },\r\n    logoIcon: {\r\n        height: '40px',\r\n        width: '40px',\r\n        color: 'white',\r\n        minHeight: '0',\r\n        minWidth: '0',\r\n        padding: '0',\r\n        display: 'block',\r\n        '@media screen and (max-width: 700px)': {\r\n            display: 'none',\r\n        },\r\n    },\r\n    drawerItem: {\r\n        display: 'block',\r\n        color: 'white'\r\n    },\r\n    drawer: {\r\n        top: '56px',\r\n        backgroundColor: 'rgba(32, 35, 42, 0.8)',\r\n    },\r\n});\r\n\r\ninterface INavigationBarProps extends RouteComponentProps, WithStyles<typeof styles> {\r\n    onSignOut: () => void;\r\n    onSignIn: () => void;\r\n\tisAuth: boolean;\r\n\tposition?: 'fixed' | 'absolute' | 'sticky' | 'static' | 'relative';\r\n    idTokenPayload?: IProfilePayload;\r\n};\r\n\r\ninterface INavigationBarState {\r\n    isDrawerOpen: boolean;\r\n    headerColor: string;\r\n}\r\n\r\nclass NavigationBar extends React.Component<INavigationBarProps, INavigationBarState> {\r\n    constructor(props: Readonly<INavigationBarProps>) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            isDrawerOpen: false,\r\n            headerColor: 'rgba(32, 35, 42, 0.8)',\r\n        };\r\n    }\r\n\r\n    toggleDrawer = (isDrawerOpen: boolean) => () => {\r\n        let state: INavigationBarState = { ...this.state, isDrawerOpen };\r\n        if (isDrawerOpen) {\r\n            state.headerColor = 'rgba(32, 35, 42)';\r\n        }\r\n        this.setState(state);\r\n    };\r\n\r\n    updateHeaderColorOnClose = () => {\r\n        const { isDrawerOpen } = this.state;\r\n        if (!isDrawerOpen) {\r\n            this.setState({\r\n                headerColor: 'rgba(32, 35, 42, 0.8)'\r\n            })\r\n        }\r\n    }\r\n\r\n    getButtonsList = (className: string) => {\r\n        return (\r\n            <React.Fragment>\r\n                <Button className={className} color=\"inherit\" component={(props: any) => <Link to=\"/dashboard\" {...props}>Dashboard</Link>}>Dashboard</Button>\r\n                <Button className={className} color=\"inherit\" component={(props: any) => <Link to=\"/listings\" {...props}>Listings</Link>}>Listings</Button>\r\n                <Button className={className} color=\"inherit\" component={(props: any) => <Link to=\"/reports\" {...props}>Reports</Link>}>Reports</Button>\r\n                {/* <Button className={className} color=\"inherit\" component={(props: any) => <Link to=\"/about\" {...props}>About</Link>}>About</Button> */}\r\n            </React.Fragment>\r\n        );\r\n    }\r\n\r\n    render() {\r\n        const { classes, isAuth, onSignOut, onSignIn, idTokenPayload, position } = this.props;\r\n        const { isDrawerOpen, headerColor } = this.state;\r\n\r\n        return (\r\n            <React.Fragment>\r\n                <AppBar className={classes.navBar} position={position || 'fixed'} style={{ backgroundColor: headerColor }}>\r\n                    <Toolbar classes={{ root: classes.toolbar }}>\r\n                        <Typography className={classes.logoText} variant=\"h6\" color=\"inherit\" noWrap>\r\n                            Amsterdam\r\n                        </Typography>\r\n                        <IconButton className={classes.menuList} color=\"inherit\" aria-label=\"Open drawer\">\r\n                            <MenuIcon onClick={this.toggleDrawer(!isDrawerOpen)} />\r\n                        </IconButton>\r\n                        {this.getButtonsList(classes.menuItem)}\r\n                        <div className={classes.grow} />\r\n                        <IconButton style={{ padding: 0, color: 'white', margin: '0 15px' }} target=\"_black\" href=\"https://github.com/fmijs2018-2019\">\r\n                            <GithubIcon style={{ height: '24px', width: '24px' }} />\r\n                        </IconButton>\r\n                        {idTokenPayload && <Avatar color=\"inherit\" className={classes.avatar} src={idTokenPayload.picture} style={{ color: headerColor }} />}\r\n                        {!isAuth && <Button onClick={onSignIn} className={classes.logInOutBtn} color=\"inherit\">LogIn</Button>}\r\n                        {isAuth && <Button onClick={onSignOut} className={classes.logInOutBtn} color=\"inherit\">LogOut</Button>}\r\n                    </Toolbar>\r\n                </AppBar>\r\n                <Drawer\r\n                    SlideProps={{\r\n                        onExited: this.updateHeaderColorOnClose\r\n                    }}\r\n                    classes={{ paperAnchorTop: classes.drawer }}\r\n                    anchor=\"top\" open={isDrawerOpen} onClose={this.toggleDrawer(false)}>\r\n                    <div\r\n                        tabIndex={0}\r\n                        role=\"button\"\r\n                        onClick={this.toggleDrawer(false)}\r\n                        onKeyDown={this.toggleDrawer(false)}\r\n                    >\r\n                        {this.getButtonsList(classes.drawerItem)}\r\n                    </div>\r\n                </Drawer>\r\n            </React.Fragment>\r\n        );\r\n    }\r\n}\r\n\r\nexport default withRouter(withStyles(styles)(NavigationBar));\r\n","import * as React from 'react';\r\nimport NavigationBar from './components/NavigationBar';\r\nimport { connect } from 'react-redux';\r\nimport { IProfilePayload } from '../models/auth/IProfilePayload';\r\nimport auth0Client from '../Auth';\r\nimport { IApplicationState } from '../redux/store';\r\nimport { isAuthenticated, clearAuthState } from '../redux/actions/authActions';\r\n\r\ninterface ILayoutProps {\r\n\tisAuth: boolean;\r\n\tposition?: 'fixed' | 'absolute' | 'sticky' | 'static' | 'relative';\r\n    children?: React.ReactNode;\r\n    idTokenPayload?: IProfilePayload;\r\n    clearAuthState: () => void;\r\n}\r\n\r\nclass Layout extends React.Component<ILayoutProps> {\r\n\r\n    signIn = () => {\r\n        auth0Client.signIn();\r\n    }\r\n\r\n    signOut = () => {\r\n        auth0Client.signOut();\r\n        this.props.clearAuthState();\r\n    }\r\n\r\n    render() {\r\n        const { isAuth, idTokenPayload, children, position } = this.props;\r\n        return <React.Fragment>\r\n            <NavigationBar onSignIn={this.signIn} onSignOut={this.signOut} isAuth={isAuth} idTokenPayload={idTokenPayload} position={position}/>\r\n            <main>\r\n                {children}\r\n            </main>\r\n        </React.Fragment>;\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state: IApplicationState) => ({\r\n    idTokenPayload: state.auth.idTokenPayload,\r\n    isAuth: isAuthenticated(state),\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch: any) => ({\r\n    clearAuthState: () => dispatch(clearAuthState()),\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Layout);","import DeckGL, { IconLayer, GeoJsonLayer } from 'deck.gl';\r\nimport { StaticMap, ViewState, FlyToInterpolator, TransitionInterpolator } from 'react-map-gl';\r\nimport { connect, MapStateToPropsFactory, MapStateToProps } from 'react-redux';\r\nimport './DashboardScene.css';\r\nimport mapMarker from './utils/map_marker.png';\r\nimport _ from 'lodash';\r\nimport NeighTooltip, { INeighTooltipProps } from './components/NeighTooltip';\r\nimport NgReportsPanel from './components/NgReportsPanel';\r\nimport { IListingDetailed } from '../../models/listings/Listing';\r\nimport { INeighborhoodDetailed, INeighborhoodReport, INeighborhood } from '../../models/neighborhoods/neighborhood';\r\nimport { IListingLocation } from '../../models/listings/ListingLocation';\r\nimport Layout from '../../Layout';\r\nimport { IApplicationState } from '../../redux/store';\r\nimport { fetchLocations, fetchListingDetailed } from '../../redux/actions/listingsActions';\r\nimport { fetchNeighborhoodsDetailed, fetchAllReports } from '../../redux/actions/neighborhoodsActions';\r\nimport React from 'react';\r\n\r\n// Set your mapbox access token here\r\nconst MAPBOX_ACCESS_TOKEN = 'pk.eyJ1IjoiZGFuaWVsYXBvc3QiLCJhIjoiY2puZGlpZWNnMDJlbTNxbjdxMGxzMTQ0diJ9.kyabw1ItkRkzxK-UqTqi9g';\r\n\r\ninterface IViewState extends ViewState {\r\n    transitionDuration?: number;\r\n    transitionInterpolator?: TransitionInterpolator;\r\n    onTransitionStart?: () => void;\r\n    onTransitionEnd?: () => void;\r\n}\r\n\r\ninterface DashBoardSceneStateProps {\r\n    locations: _.Dictionary<IListingLocation[]> | null;\r\n    neighborhoods: _.Dictionary<INeighborhoodDetailed> | null;\r\n    allReports: _.Dictionary<INeighborhoodReport> | null;\r\n}\r\n\r\ninterface DashBardSceneActionsProps {\r\n    fetchNeighborhoodsDetailed: () => Promise<INeighborhoodDetailed[]>;\r\n    fetchLocations: () => Promise<IListingLocation[]>;\r\n    fetchAllReports: () => Promise<INeighborhoodReport[]>;\r\n    fetchListingDetailed: (id: number | null) => Promise<IListingDetailed> | void;\r\n}\r\n\r\ninterface DashBoardSceneState {\r\n    viewState: IViewState,\r\n    selectedNgId: number | null,\r\n    hoveredNgId: number | null,\r\n    tooltipInfo: INeighTooltipProps | null,\r\n    showAllGeoJsons: boolean,\r\n}\r\n\r\ninterface DashBoardSceneProps extends DashBoardSceneStateProps, DashBardSceneActionsProps {\r\n}\r\n\r\nconst initialViewState: IViewState = {\r\n    longitude: 4.916651,\r\n    latitude: 52.366693,\r\n    zoom: 11,\r\n    pitch: 0,\r\n    bearing: 0,\r\n    transitionDuration: 1000,\r\n    transitionInterpolator: new FlyToInterpolator()\r\n}\r\n\r\nclass DashBoardScene extends React.Component<DashBoardSceneProps, DashBoardSceneState> {\r\n    constructor(props: Readonly<DashBoardSceneProps>) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            viewState: initialViewState,\r\n            selectedNgId: null,\r\n            hoveredNgId: null,\r\n            tooltipInfo: null,\r\n            showAllGeoJsons: true,\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        !this.props.locations && this.props.fetchLocations();\r\n        !this.props.neighborhoods && this.props.fetchNeighborhoodsDetailed();\r\n\t\t!this.props.allReports && this.props.fetchAllReports();\r\n    }\r\n\r\n    getLayers = () => {\r\n        const { hoveredNgId, selectedNgId } = this.state;\r\n        const { locations, neighborhoods } = this.props;\r\n\r\n        const iconLayer = selectedNgId && locations && new IconLayer({\r\n            id: `icon-layer`,\r\n            pickable: true,\r\n            data: locations[selectedNgId],\r\n            iconAtlas: mapMarker,\r\n            iconMapping: {\r\n                marker: {\r\n                    \"x\": 150,\r\n                    \"y\": 150,\r\n                    \"width\": 400,\r\n                    \"height\": 400,\r\n                    \"mask\": true\r\n                }\r\n            },\r\n            sizeScale: 4,\r\n            getPosition: (d: IListingLocation) => [d.lon, d.lat],\r\n            getIcon: () => 'marker',\r\n            getSize: () => 7,\r\n            getColor: [247, 19, 72, 200],\r\n        });\r\n\r\n        const geoJsonAllLayer = this.state.showAllGeoJsons && neighborhoods && new GeoJsonLayer({\r\n            id: 'geojson-all-layer',\r\n            data: _.map(neighborhoods, 'geoJson'),\r\n            pickable: true,\r\n            filled: true,\r\n            extruded: false,\r\n            getFillColor: [0, 0, 0, 0],\r\n            lineJointRounded: true,\r\n            getLineColor: [255, 255, 255, 255],\r\n            getLineWidth: 40,\r\n            onHover: this.ngHoverHandler,\r\n            onClick: this.ngClickHandler\r\n        });\r\n\r\n        const selectedNgLayer = neighborhoods && selectedNgId && new GeoJsonLayer({\r\n            id: `geoJson-selected-layer`,\r\n            data: neighborhoods[selectedNgId].geoJson,\r\n            stroked: true,\r\n            filled: false,\r\n            extruded: false,\r\n            lineJointRounded: true,\r\n            getLineColor: [255, 255, 255, 150],\r\n            getLineWidth: 10\r\n        });\r\n\r\n        const hoveredNgLayer = hoveredNgId && neighborhoods && new GeoJsonLayer({\r\n            id: `geoJson-hovered-layer`,\r\n            data: neighborhoods[hoveredNgId].geoJson,\r\n            filled: true,\r\n            getFillColor: [0, 0, 0, 0],\r\n            extruded: false,\r\n            getLineColor: [7, 0, 255],\r\n            getLineWidth: 30,\r\n        });\r\n\r\n        return [iconLayer, selectedNgLayer, geoJsonAllLayer, hoveredNgLayer];\r\n    }\r\n\r\n    ngHoverHandler = (feature: any) => {\r\n        const { locations } = this.props;\r\n\r\n        if (feature.object) {\r\n            const ngName = feature.object.properties.neighbourhood;\r\n            const ngId = feature.object.properties.id;\r\n            const listCount = locations ? locations[ngId].length : 0;\r\n            const { x, y } = feature;\r\n            const tooltipProps: INeighTooltipProps = { ngName, listCount, x, y };\r\n\r\n            this.setState({ hoveredNgId: feature.object.properties.id, tooltipInfo: tooltipProps });\r\n        } else {\r\n            this.setState({ hoveredNgId: null, tooltipInfo: null });\r\n        }\r\n    };\r\n\r\n    ngClickHandler = (feature: any) => {\r\n        if (feature.object) {\r\n            const ngId = feature.object.properties.id;\r\n            this.setNeighborhood(ngId);\r\n        }\r\n    };\r\n\r\n    onViewStateChange = ({ viewState }: any) => {\r\n        this.setState({ viewState });\r\n    }\r\n\r\n    setNeighborhood = (neighborhoodId: number) => {\r\n        const { neighborhoods } = this.props;\r\n        const ng = neighborhoods && neighborhoods[neighborhoodId];\r\n\r\n        if (!ng) {\r\n            return;\r\n        }\r\n\r\n        const newViewState: IViewState = {\r\n            longitude: ng.centerLongitude,\r\n            latitude: ng.centerLatitude,\r\n            zoom: ng.zoom,\r\n            pitch: 0,\r\n            bearing: 0,\r\n            transitionDuration: 1000,\r\n            transitionInterpolator: new FlyToInterpolator(),\r\n            onTransitionStart: () => this.setState({ showAllGeoJsons: false }),\r\n            onTransitionEnd: () => this.setState({ selectedNgId: neighborhoodId }),\r\n        };\r\n\r\n        this.setState({\r\n            viewState: newViewState,\r\n            tooltipInfo: null,\r\n            hoveredNgId: null,\r\n        });\r\n    };\r\n\r\n    closeReportsPanelHandler = () => {\r\n        this.setState({\r\n            selectedNgId: null,\r\n            hoveredNgId: null,\r\n            viewState: { ...initialViewState, onTransitionEnd: () => this.setState({ showAllGeoJsons: true }) }\r\n        });\r\n    };\r\n\r\n    closeListingPanelHandler = () => {\r\n        this.props.fetchListingDetailed(null);\r\n    };\r\n\r\n    getSelectedNeighborhood = () => {\r\n        const { neighborhoods } = this.props;\r\n        const { selectedNgId } = this.state;\r\n        return (selectedNgId && neighborhoods) ? neighborhoods[selectedNgId] : null;\r\n    }\r\n\r\n    getNgReports = (neigh: INeighborhood | null) => {\r\n        const { allReports } = this.props;\r\n        return (neigh && allReports) ? allReports[neigh.id] : null;\r\n    }\r\n\r\n    getNgListingsCount = (neigh: INeighborhood | null) => {\r\n        const { locations } = this.props;\r\n        return (neigh && locations) ? locations[neigh.id].length : 0;\r\n    }\r\n\r\n    render() {\r\n        const { tooltipInfo } = this.state;\r\n\r\n        const neigh = this.getSelectedNeighborhood();\r\n        const ngReport = this.getNgReports(neigh);\r\n        const listingsCount = this.getNgListingsCount(neigh);\r\n\r\n        return (\r\n            <Layout>\r\n                <DeckGL\r\n                    viewState={this.state.viewState}\r\n                    layers={this.getLayers()}\r\n                    controller={true}\r\n                    onViewStateChange={this.onViewStateChange}\r\n                    useDevicePixels={false}>\r\n                    <StaticMap mapStyle=\"mapbox://styles/mapbox/dark-v9\" width=\"100%\" height=\"100%\" mapboxApiAccessToken={MAPBOX_ACCESS_TOKEN} />\r\n                </DeckGL>\r\n                {tooltipInfo && <NeighTooltip {...tooltipInfo} />}\r\n                {ngReport && <NgReportsPanel listingsCount={listingsCount} ng={ngReport} onClose={this.closeReportsPanelHandler} />}\r\n            </Layout>\r\n        );\r\n    }\r\n};\r\n\r\nconst mapStateToProps = (state: IApplicationState) => {\r\n    return {\r\n        locations: state.listings.locations,\r\n        neighborhoods: state.neighborhoods.detailedList,\r\n        allReports: state.neighborhoods.allReports\r\n\t};\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch: any) => ({\r\n    fetchLocations: (): Promise<IListingLocation[]> => dispatch(fetchLocations()),\r\n    fetchNeighborhoodsDetailed: (): Promise<INeighborhoodDetailed[]> => dispatch(fetchNeighborhoodsDetailed()),\r\n    fetchAllReports: (): Promise<INeighborhoodReport[]> => dispatch(fetchAllReports()),\r\n    fetchListingDetailed: (id: number | null) => dispatch(fetchListingDetailed(id)),\r\n});\r\n\r\nexport default connect<DashBoardSceneStateProps, DashBardSceneActionsProps, {}>(mapStateToProps as any, mapDispatchToProps)(DashBoardScene);","import { Theme, createStyles, WithStyles, withStyles, Chip } from '@material-ui/core';\r\nimport LocationOnIcon from '@material-ui/icons/LocationOn'\r\nimport * as React from 'react';\r\n\r\nconst styles = (theme: Theme) => createStyles({\r\n    icon: {\r\n        color: 'rosybrown',\r\n    },\r\n    root: {\r\n        border: '1px solid rosybrown',\r\n    }\r\n})\r\n\r\ninterface ILisingNeighborhoodProps extends WithStyles<typeof styles> {\r\n    neighborhood: string;\r\n}\r\n\r\nconst ListingNeighborhoodColumn = (props: ILisingNeighborhoodProps) => {\r\n    const { neighborhood, classes } = props;\r\n    return <Chip\r\n        classes={classes as any}\r\n        label={neighborhood}\r\n        icon={<LocationOnIcon />}\r\n        variant=\"outlined\" />\r\n}\r\n\r\nexport default withStyles(styles)(ListingNeighborhoodColumn);","import { Theme, createStyles, WithStyles, withStyles, Chip } from '@material-ui/core';\r\nimport AssessmentIcon from '@material-ui/icons/AssessmentOutlined'\r\nimport * as React from 'react';\r\n\r\nconst styles = (theme: Theme) => createStyles({\r\n    orageChip: {\r\n        color: '#ffc107',\r\n        border: '1px solid #ffc107',\r\n    },\r\n    orageIcon: {\r\n        color: '#ffc107',\r\n    },\r\n    redChip: {\r\n        color: '#dc3545',\r\n        border: '1px solid #dc3545',\r\n    },\r\n    redIcon: {\r\n        color: '#dc3545',\r\n    },\r\n    greenChip: {\r\n        color: '#28a745',\r\n        border: '1px solid #28a745',\r\n    },\r\n    greenIcon: {\r\n        color: '#28a745',\r\n    }\r\n})\r\n\r\ninterface IListingRatingColumnProps extends WithStyles<typeof styles> {\r\n    rating: number;\r\n}\r\n\r\nconst ListingRatingColumn = (props: IListingRatingColumnProps) => {\r\n    const { rating, classes } = props;\r\n    let chipClasses: any;\r\n    if (rating > 87) {\r\n        chipClasses = { root: classes.greenChip, icon: classes.greenIcon };\r\n    } else if (rating > 68) {\r\n        chipClasses = { root: classes.orageChip, icon: classes.orageIcon };\r\n    } else {\r\n        chipClasses = { root: classes.redChip, icon: classes.redIcon };\r\n    }\r\n\r\n    return <Chip\r\n        classes={chipClasses}\r\n        label={`${rating}/100`}\r\n        icon={<AssessmentIcon />}\r\n        variant=\"outlined\"\r\n    />\r\n\r\n\t\r\n}\r\n\r\nexport default withStyles(styles)(ListingRatingColumn);","import * as React from 'react';\r\nimport Shared from '@material-ui/icons/SupervisedUserCircleRounded'\r\nimport PrivateRoom from '@material-ui/icons/LockOpen'\r\nimport House from '@material-ui/icons/HomeOutlined'\r\nimport { IListingType } from '../../../models/listings/ListingTableDto';\r\n\r\ninterface IListingTypeColumn {\r\n    type: IListingType;\r\n}\r\n\r\nexport default (props: IListingTypeColumn) => {\r\n    const { type: { roomType, propertyType } } = props;\r\n    let icon;\r\n    if (roomType === 'Entire home/apt') {\r\n        icon = <House fontSize=\"large\" style={{marginRight: '5px', color: '#60cfdb'}} />\r\n    } else if (roomType === 'Private room') {\r\n        icon = <PrivateRoom style={{marginRight: '5px', color: 'rgb(255, 123, 152)'}} fontSize=\"large\" />\r\n    } else {\r\n        icon = <Shared style={{marginRight: '5px', color: 'gray'}} fontSize=\"large\" />\r\n    }\r\n\r\n    return <div style={{ display: 'flex', alignItems: 'center' }}>\r\n        <div>{icon}</div>\r\n        <div>\r\n            <div>{roomType}</div>\r\n            <div>{propertyType}</div>\r\n        </div>\r\n    </div>;\r\n}","import * as React from \"react\";\r\nimport { withStyles, createStyles, Theme, WithStyles } from \"@material-ui/core/styles\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport FirstPageIcon from \"@material-ui/icons/FirstPage\";\r\nimport KeyboardArrowLeft from \"@material-ui/icons/KeyboardArrowLeft\";\r\nimport KeyboardArrowRight from \"@material-ui/icons/KeyboardArrowRight\";\r\nimport LastPageIcon from \"@material-ui/icons/LastPage\";\r\n\r\nconst styles = (theme: Theme) => createStyles({\r\n    root: {\r\n        flexShrink: 0,\r\n        color: theme.palette.text.secondary,\r\n        marginLeft: theme.spacing.unit * 2.5,\r\n    },\r\n    button: {\r\n        padding: '6px',\r\n    }\r\n});\r\n\r\ninterface ITablePaginationActionsProps extends WithStyles<typeof styles> {\r\n    count: number,\r\n    onChangePage: (event: any, page: number) => void,\r\n    page: number,\r\n    rowsPerPage: number,\r\n    theme: number,\r\n}\r\n\r\nclass TablePaginationActions extends React.Component<ITablePaginationActionsProps> {\r\n    handleFirstPageButtonClick = (event: any) => {\r\n        this.props.onChangePage(event, 0);\r\n    };\r\n\r\n    handleBackButtonClick = (event: any) => {\r\n        this.props.onChangePage(event, this.props.page - 1);\r\n    };\r\n\r\n    handleNextButtonClick = (event: any) => {\r\n        this.props.onChangePage(event, this.props.page + 1);\r\n    };\r\n\r\n    handleLastPageButtonClick = (event: any) => {\r\n        const lastPage = Math.max(0, Math.ceil(this.props.count / this.props.rowsPerPage) - 1);\r\n        this.props.onChangePage(event, lastPage);\r\n    };\r\n\r\n    render() {\r\n        const { classes, count, page, rowsPerPage } = this.props;\r\n\r\n        return (\r\n            <div className={classes.root}>\r\n                <IconButton\r\n                    classes={{ root: classes.button }}\r\n                    onClick={this.handleFirstPageButtonClick}\r\n                    disabled={page === 0}\r\n                    aria-label=\"First Page\"\r\n                >\r\n                    <FirstPageIcon />\r\n                </IconButton>\r\n                <IconButton\r\n                    classes={{ root: classes.button }}\r\n                    onClick={this.handleBackButtonClick}\r\n                    disabled={page === 0}\r\n                    aria-label=\"Previous Page\"\r\n                >\r\n                    <KeyboardArrowLeft />\r\n                </IconButton>\r\n                <IconButton\r\n                    classes={{ root: classes.button }}\r\n                    onClick={this.handleNextButtonClick}\r\n                    disabled={page >= Math.ceil(count / rowsPerPage) - 1}\r\n                    aria-label=\"Next Page\"\r\n                >\r\n                    <KeyboardArrowRight />\r\n                </IconButton>\r\n                <IconButton\r\n                    classes={{ root: classes.button }}\r\n                    onClick={this.handleLastPageButtonClick}\r\n                    disabled={page >= Math.ceil(count / rowsPerPage) - 1}\r\n                    aria-label=\"Last Page\"\r\n                >\r\n                    <LastPageIcon />\r\n                </IconButton>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default withStyles(styles)(TablePaginationActions);","import { Theme, createStyles, WithStyles, withStyles, TablePagination } from '@material-ui/core';\r\nimport * as React from 'react';\r\nimport classNames from 'classnames';\r\nimport TablePagingActions from './TablePagingActions';\r\n\r\nconst styles = (theme: Theme) => createStyles({\r\n    root: {\r\n        border: 'none',\r\n    }\r\n});\r\n\r\ninterface ITablePagingProps extends WithStyles<typeof styles> {\r\n    className?: string,\r\n    page: number;\r\n    pagesCount: number;\r\n    rowsPerPage: number;\r\n    onPageChange: (page: number) => void;\r\n    onPageSizeChange: (pageSize: number) => void;\r\n}\r\n\r\nclass TablePaging extends React.Component<ITablePagingProps> {\r\n\r\n    handleChangePage = (event: any, page: number) => {\r\n        this.props.onPageChange(page);\r\n    };\r\n\r\n    handleChangeRowsPerPage = (event: any) => {\r\n        this.props.onPageSizeChange(event.target.value);\r\n    };\r\n\r\n    render() {\r\n        const { rowsPerPage, page, pagesCount, classes, className } = this.props;\r\n\r\n        const rootClasses = classNames(classes.root, className);\r\n\r\n        return (\r\n            <TablePagination\r\n                classes={{root: rootClasses}}\r\n                rowsPerPageOptions={[5, 10, 20]}\r\n                colSpan={3}\r\n                count={pagesCount}\r\n                rowsPerPage={rowsPerPage}\r\n                page={page}\r\n                onChangePage={this.handleChangePage}\r\n                onChangeRowsPerPage={this.handleChangeRowsPerPage}\r\n                ActionsComponent={TablePagingActions as any}\r\n            />\r\n        );\r\n    }\r\n}\r\n\r\nexport default withStyles(styles)(TablePaging);\r\n","import * as React from 'react';\r\nimport { Index, RowMouseEventHandlerParams, TableCellRenderer, TableHeaderRenderer, Table, AutoSizer, Column, TableCellProps, TableHeaderProps } from 'react-virtualized';\r\nimport classNames from 'classnames';\r\nimport ExpandMore from '@material-ui/icons/ExpandMore';\r\nimport UnfoldMore from '@material-ui/icons/UnfoldMore';\r\nimport { WithStyles, Theme, createStyles, TableCell, withStyles, Tooltip, TableSortLabel } from '@material-ui/core';\r\n\r\nconst styles = (theme: Theme) => createStyles({\r\n    table: {\r\n        fontFamily: theme.typography.fontFamily,\r\n    },\r\n    flexContainer: {\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        boxSizing: 'border-box',\r\n    },\r\n    tableRow: {\r\n        cursor: 'pointer',\r\n    },\r\n    tableRowHover: {\r\n        '&:hover': {\r\n            backgroundColor: theme.palette.grey[200],\r\n        },\r\n    },\r\n    tableCell: {\r\n        flex: 1,\r\n    },\r\n    noClick: {\r\n        cursor: 'initial',\r\n    },\r\n    sortLabelIcon: {\r\n        display: 'inline',\r\n        opacity: 1,\r\n    },\r\n    sortLabelIconWithoutTransition: {\r\n        display: 'inline',\r\n        opacity: 1,\r\n        transition: 'none',\r\n    }\r\n});\r\n\r\nexport interface IVirtualizedColumn {\r\n    width: number;\r\n    dataKey: string;\r\n    label: string;\r\n    flexGrow?: number;\r\n    renderCell?: TableCellRenderer;\r\n    disableSort?: boolean;\r\n}\r\n\r\ntype CellRenderer = (props: TableCellProps, column: IVirtualizedColumn) => React.ReactNode;\r\ntype HeaderRenderer = (props: TableHeaderProps, column: IVirtualizedColumn) => React.ReactNode;\r\n\r\ninterface IVirtualizedTableProps extends WithStyles<typeof styles> {\r\n    rowClassName?: string;\r\n    rowHeight: number;\r\n    headerHeight: number;\r\n    columns: IVirtualizedColumn[];\r\n    onRowClick?: (info: RowMouseEventHandlerParams) => void;\r\n    rowCount: number;\r\n    rowGetter: (index: Index) => any;\r\n    sortable?: boolean;\r\n    onSort?: (sortBy: string, sort: 'asc' | 'desc') => void;\r\n    orderBy?: string;\r\n    order: 'asc' | 'desc';\r\n}\r\n\r\nclass VirtualizedTable extends React.Component<IVirtualizedTableProps> {\r\n    constructor(props: any) {\r\n        super(props);\r\n    }\r\n\r\n    getRowClassName = ({ index }: Index) => {\r\n        const { classes, rowClassName } = this.props;\r\n        return classNames(classes.tableRow, classes.flexContainer, rowClassName);\r\n    };\r\n\r\n    cellRenderer: CellRenderer = (cellProps, column) => {\r\n        const { classes, rowHeight } = this.props;\r\n        const data = column.renderCell ? column.renderCell(cellProps) : cellProps.cellData;\r\n\r\n        return (\r\n            <TableCell\r\n                component=\"div\"\r\n                className={classNames(classes.tableCell, classes.flexContainer)}\r\n                variant=\"body\"\r\n                style={{ height: rowHeight }}\r\n                align=\"left\"\r\n            >\r\n                {data || '-'}\r\n            </TableCell>\r\n        );\r\n    };\r\n\r\n    createSortHandler = (property: string) => (event: any) => {\r\n        let order: any = 'desc';\r\n\r\n        if (this.props.orderBy === property && this.props.order === 'desc') {\r\n            order = 'asc';\r\n        }\r\n\r\n        this.props.onSort && this.props.onSort(property, order);\r\n    }\r\n\r\n    headerRenderer: HeaderRenderer = ({ label, dataKey }, column) => {\r\n        const { orderBy, order, headerHeight, classes, sortable } = this.props;\r\n\r\n        const active = orderBy === dataKey;\r\n        const header = !column.disableSort && sortable\r\n            ? <Tooltip\r\n                title={`Order by ${dataKey}`}\r\n                placement=\"top-end\"\r\n                enterDelay={300}>\r\n                <TableSortLabel\r\n                    classes={{ icon: active ? classes.sortLabelIcon : classes.sortLabelIconWithoutTransition }}\r\n                    active={active}\r\n                    direction={order}\r\n                    onClick={this.createSortHandler(dataKey)}\r\n                    IconComponent={active ? ExpandMore : UnfoldMore}\r\n                >\r\n                    {label}\r\n                </TableSortLabel>\r\n            </Tooltip>\r\n            : label;\r\n\r\n\r\n        return (\r\n            <TableCell\r\n                component=\"div\"\r\n                className={classNames(classes.tableCell, classes.flexContainer, classes.noClick)}\r\n                variant=\"head\"\r\n                style={{ height: headerHeight }}\r\n                align={'left'}\r\n            >\r\n                {header}\r\n            </TableCell>\r\n        );\r\n    };\r\n\r\n    render() {\r\n        const { classes, columns, headerHeight, rowHeight, onRowClick, rowGetter, rowCount } = this.props;\r\n\r\n        return (\r\n            <AutoSizer>\r\n                {({ height, width }) => (\r\n                    <Table\r\n                        headerHeight={headerHeight}\r\n                        rowHeight={rowHeight}\r\n                        rowGetter={rowGetter}\r\n                        rowCount={rowCount}\r\n                        onRowClick={onRowClick}\r\n                        className={classes.table}\r\n                        height={height}\r\n                        width={width}\r\n                        rowClassName={this.getRowClassName}\r\n                    >\r\n                        {columns.map((col) => {\r\n                            const { dataKey, flexGrow, width, label } = col\r\n                            return (\r\n                                <Column\r\n                                    key={dataKey}\r\n                                    headerRenderer={props => this.headerRenderer(props, col)}\r\n                                    className={classNames(classes.flexContainer)}\r\n                                    cellRenderer={props => this.cellRenderer(props, col)}\r\n                                    dataKey={dataKey}\r\n                                    flexGrow={flexGrow}\r\n                                    width={width}\r\n                                    label={label}\r\n                                />\r\n                            );\r\n                        })}\r\n                    </Table>\r\n                )}\r\n            </AutoSizer>\r\n        );\r\n    }\r\n}\r\n\r\nexport default withStyles(styles)(VirtualizedTable);","import * as React from 'react';\r\nimport { GroupOutlined } from '@material-ui/icons';\r\nimport { Badge, createStyles, Theme, WithStyles, withStyles } from '@material-ui/core';\r\n\r\nconst styles = (theme: Theme) => createStyles({\r\n    badge: {\r\n        top: 0,\r\n        right: '-20px',\r\n        fontSize: '0.9rem',\r\n    }\r\n});\r\n\r\ninterface IListingAccommodatesColumnProps extends WithStyles<typeof styles> {\r\n    accommodates: number;\r\n}\r\n\r\nconst ListingAccommodatesColumn = (props: IListingAccommodatesColumnProps) => {\r\n    const { accommodates, classes } = props;\r\n    return <Badge badgeContent={`x${accommodates}`} color=\"default\" classes={classes}>\r\n        <GroupOutlined />\r\n    </Badge>\r\n}\r\n\r\nexport default withStyles(styles)(ListingAccommodatesColumn);","import { createStyles, Theme, WithStyles, withStyles, Typography } from '@material-ui/core';\r\nimport * as React from 'react';\r\nimport { Index } from 'react-virtualized';\r\nimport ListingNeighborhoodColumn from './ListingNeighborhoodColumn';\r\nimport ListingRatingColumn from './ListingRatingColumn';\r\nimport ListingTypeColumn from './ListingTypeColumn';\r\nimport TablePaging from '../../../components/TablePaging';\r\nimport VirtualizedTable, { IVirtualizedColumn } from '../../../components/VirtualizedTable';\r\nimport ListingAccommodatesColumn from './ListingAccommodatesColumn';\r\nimport { IListingTableDto } from '../../../models/listings/ListingTableDto';\r\n\r\nconst styles = (theme: Theme) => createStyles({\r\n\tpaging: {\r\n\t\tfloat: 'right',\r\n\t},\r\n});\r\n\r\ninterface IListingsTableProps extends WithStyles<typeof styles> {\r\n\tlistings: IListingTableDto[];\r\n\tcurrentPage: number;\r\n\ttotalCount: number;\r\n\tpageSize: number;\r\n\tnumberOfPages: number;\r\n\torderBy: string;\r\n\torder: 'asc' | 'desc';\r\n\tonSort: (orderBy: string, order: 'asc' | 'desc') => void;\r\n\tonPageSizeChange: (pageSize: number) => void;\r\n\tonPageChange: (newPage: number) => void;\r\n}\r\n\r\nclass ListingsTable extends React.Component<IListingsTableProps> {\r\n\tonPageSizeChange = (pageSize: number) => {\r\n\t\tthis.props.onPageSizeChange(pageSize);\r\n\t}\r\n\r\n\tonPageChange = (page: number) => {\r\n\t\tthis.props.onPageChange(page);\r\n\t}\r\n\r\n\tgetColumns = (): IVirtualizedColumn[] => {\r\n\t\treturn [\r\n\t\t\t{\r\n\t\t\t\twidth: 180,\r\n\t\t\t\tlabel: 'Type',\r\n\t\t\t\tdataKey: 'type',\r\n\t\t\t\trenderCell: ({ cellData }: any) => cellData && <ListingTypeColumn type={cellData} />,\r\n\t\t\t\tdisableSort: true,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\twidth: 250,\r\n\t\t\t\tlabel: 'Name',\r\n\t\t\t\tdataKey: 'name',\r\n\t\t\t\tflexGrow: 1,\t\r\n\t\t\t\tdisableSort: true,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\twidth: 120,\r\n\t\t\t\tlabel: 'Price',\r\n\t\t\t\tdataKey: 'price',\r\n\t\t\t\trenderCell: ({ cellData }: any) => cellData && <div>${cellData.toFixed(2)}</div>,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\twidth: 300,\r\n\t\t\t\tlabel: 'Neighborhood',\r\n\t\t\t\tdataKey: 'neighborhood',\r\n\t\t\t\tflexGrow: 1,\r\n\t\t\t\trenderCell: ({ cellData }: any) => cellData && <ListingNeighborhoodColumn neighborhood={cellData} />,\r\n\t\t\t\tdisableSort: true,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\twidth: 140,\r\n\t\t\t\tlabel: 'Accommodates',\r\n\t\t\t\tdataKey: 'accommodates',\r\n\t\t\t\trenderCell: ({ cellData }: any) => cellData && <ListingAccommodatesColumn accommodates={cellData} />,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\twidth: 130,\r\n\t\t\t\tlabel: 'Rating',\r\n\t\t\t\tdataKey: 'rating',\r\n\t\t\t\trenderCell: ({ cellData }: any) => cellData && <ListingRatingColumn rating={cellData} />,\r\n\t\t\t},\r\n\t\t]\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst { listings, classes, order, orderBy } = this.props;\r\n\t\tconst columns = this.getColumns();\r\n\r\n\t\treturn (\r\n\t\t\t<React.Fragment>\r\n\t\t\t\t<div style={{ width: '100%', padding: '20px 0 20px 20px', boxSizing: 'border-box' }}>\r\n\t\t\t\t\t<Typography variant=\"h5\">Listings</Typography>\r\n\t\t\t\t\t<p style={{ margin: 'initial', color: 'gray', fontSize: '14px' }}>{this.props.totalCount} listings found</p>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div style={{ overflowX: 'auto', width: '100%', borderTop: '1px solid rgba(224, 224, 224, 1)' }}>\r\n\t\t\t\t\t<div style={{ height: '500px', width: 'auto', minWidth:'1140px', padding: '1px', margin: 'auto' }}>\r\n\t\t\t\t\t\t<VirtualizedTable\r\n\t\t\t\t\t\t\tsortable\r\n\t\t\t\t\t\t\trowClassName=\"\"\r\n\t\t\t\t\t\t\trowHeight={70}\r\n\t\t\t\t\t\t\theaderHeight={56}\r\n\t\t\t\t\t\t\trowCount={listings.length}\r\n\t\t\t\t\t\t\trowGetter={({ index }: Index) => listings[index]}\r\n\t\t\t\t\t\t\tonRowClick={(event: any) => console.log(event)}\r\n\t\t\t\t\t\t\tcolumns={columns}\r\n\t\t\t\t\t\t\torder={order}\r\n\t\t\t\t\t\t\torderBy={orderBy}\r\n\t\t\t\t\t\t\tonSort={this.props.onSort}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div style={{ width: '100%' }}>\r\n\t\t\t\t\t<TablePaging className={classes.paging} page={this.props.currentPage}\r\n\t\t\t\t\t\tpagesCount={this.props.numberOfPages}\r\n\t\t\t\t\t\trowsPerPage={this.props.pageSize}\r\n\t\t\t\t\t\tonPageChange={this.onPageChange}\r\n\t\t\t\t\t\tonPageSizeChange={this.onPageSizeChange} />\r\n\t\t\t\t</div>\r\n\t\t\t</React.Fragment>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default withStyles(styles)(ListingsTable);","import { createStyles, ExpansionPanel, ExpansionPanelDetails, ExpansionPanelSummary, withStyles, WithStyles } from '@material-ui/core';\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\nimport * as React from 'react';\r\nimport classNames from 'classnames';\r\n\r\nconst styles = createStyles({\r\n    root: {\r\n        margin: 0,\r\n        boxShadow: 'none',\r\n        '&:before': {\r\n            display: 'none',\r\n        }\r\n    },\r\n    panelDetails: {\r\n        maxHeight: '150px',\r\n\t\toverflowY: 'auto',\r\n\t\twidth: '100%',\r\n    }\r\n})\r\n\r\ninterface IExpPanelProps extends WithStyles<typeof styles> {\r\n    summary: React.ReactNode;\r\n    expanded: boolean;\r\n    onChange: (expanded: boolean) => void;\r\n    children: React.ReactNode;\r\n    className?: string;\r\n}\r\n\r\nconst ExpPanel: React.SFC<IExpPanelProps> = (props) => {\r\n    const { expanded, onChange, summary, children, classes, className } = props;\r\n    const expansionPanelClassName = classNames(classes.root, className);\r\n\r\n    return <ExpansionPanel className={expansionPanelClassName} expanded={expanded} onChange={(e: any, b: boolean) => onChange(b)}>\r\n        <ExpansionPanelSummary  expandIcon={<ExpandMoreIcon />}>\r\n            {summary}\r\n        </ExpansionPanelSummary>\r\n        <ExpansionPanelDetails>\r\n            <div className={classes.panelDetails}>{children}</div>\r\n        </ExpansionPanelDetails>\r\n    </ExpansionPanel>\r\n}\r\n\r\nexport default withStyles(styles)(ExpPanel);","import * as React from 'react';\r\nimport { withStyles, Theme, WithStyles, createStyles } from '@material-ui/core/styles';\r\nimport TextField from '@material-ui/core/TextField';\r\n\r\nconst styles = (theme: Theme) => createStyles({\r\n    container: {\r\n        display: 'flex',\r\n        flexWrap: 'wrap',\r\n    },\r\n    textField: {\r\n        marginLeft: theme.spacing.unit,\r\n        marginRight: theme.spacing.unit,\r\n        width: 200,\r\n    },\r\n});\r\n\r\ninterface IFromToDatePickerProps extends WithStyles {\r\n    from?: string,\r\n    to?: string,\r\n    fromChangeHandler: (newDate: string) => void,\r\n    toChangeHandler: (newDate: string) => void\r\n};\r\n\r\nclass FromToDatePicker extends React.Component<IFromToDatePickerProps> {\r\n\r\n    render() {\r\n        const { classes, from, to, fromChangeHandler, toChangeHandler } = this.props;\r\n\r\n        return (\r\n            <React.Fragment>\r\n                <form className={classes.container} noValidate>\r\n                    <TextField\r\n                        id=\"date\"\r\n                        label=\"From\"\r\n                        type=\"date\"\r\n                        value={from || ''}\r\n                        InputProps={{}}\r\n                        onChange={(event: any) => fromChangeHandler(event.target.value)}\r\n                        className={classes.textField}\r\n                        InputLabelProps={{\r\n                            shrink: true,\r\n                        }}\r\n                    />\r\n                </form>\r\n                <br />\r\n                <form className={classes.container} noValidate>\r\n                    <TextField\r\n                        id=\"date\"\r\n                        label=\"To\"\r\n                        type=\"date\"\r\n                        value={to || ''}\r\n                        onChange={(event: any) => toChangeHandler(event.target.value)}\r\n                        className={classes.textField}\r\n                        InputLabelProps={{\r\n                            shrink: true,\r\n                        }}\r\n                    />\r\n                </form>\r\n            </React.Fragment>\r\n        );\r\n    }\r\n}\r\n\r\nexport default withStyles(styles)(FromToDatePicker);","import * as React from 'react';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport InputAdornment from '@material-ui/core/InputAdornment';\r\n\r\ninterface INumberRange {\r\n\tonFromChange: (value: number) => void,\r\n\tonToChange: (value: number) => void,\r\n\tfrom?: number,\r\n\tto?: number,\r\n}\r\n\r\nexport default class NumberRange extends React.Component<INumberRange> {\r\n\trender() {\r\n\t\tconst { onToChange, onFromChange, from, to } = this.props;\r\n\r\n\t\treturn (<div style={{ width: \"100%\" }}>\r\n\t\t\t<TextField\r\n\t\t\t\tid=\"standart-number\"\r\n\t\t\t\tvalue={from || ''}\r\n\t\t\t\tonChange={(e: any) => { onFromChange(e.target.value) }}\r\n\t\t\t\ttype=\"number\"\r\n\t\t\t\tlabel=\"From\"\r\n\t\t\t\tplaceholder=\"$\"\r\n\t\t\t\tInputProps={{style:{display: 'inline', marginRight: '15px'}}}\r\n\t\t\t\tinputProps={{style:{width: '75px', padding: '7px'}, }}\r\n\t\t\t\tInputLabelProps={{\r\n\t\t\t\t\tshrink: true,\r\n\t\t\t\t}}\r\n\t\t\t\tmargin=\"normal\"\r\n\t\t\t\tvariant=\"outlined\"\r\n\t\t\t/>\r\n\t\t\t<TextField\r\n\t\t\t\tid=\"standart-number\"\r\n\t\t\t\tvalue={to || ''}\r\n\t\t\t\tonChange={(e: any) => { onToChange(e.target.value) }}\r\n\t\t\t\ttype=\"number\"\r\n\t\t\t\tplaceholder=\"$\"\r\n\t\t\t\tlabel=\"To\"\r\n\t\t\t\tInputProps={{style:{display: 'inline'}}}\t\t\t\t\t\t\t\r\n\t\t\t\tinputProps={{style:{width: '75px', padding: '7px'}}}\t\t\t\t\t\t\t\r\n\t\t\t\tInputLabelProps={{\r\n\t\t\t\t\tshrink: true,\r\n\t\t\t\t}}\r\n\t\t\t\tmargin=\"normal\"\r\n\t\t\t\tvariant=\"outlined\"\r\n\t\t\t/>\r\n\t\t</div>)\r\n\t}\r\n}\r\n","import { Theme, createStyles, WithStyles, FormControlLabel, Button, withStyles, Typography, Badge, Checkbox } from \"@material-ui/core\";\r\nimport { IFilters } from \"../../../models/grid/filtersData\";\r\nimport React from \"react\";\r\nimport ExpPanel from \"../../../components/ExpPanel\";\r\nimport FromToDatePicker from \"../../../components/FromToDatePicker\";\r\nimport NumberRange from \"../../../components/NumberRange\";\r\n\r\nconst styles = (theme: Theme) => createStyles({\r\n    sidebar: {\r\n        width: '20%',\r\n    },\r\n    checkbox: {\r\n        display: 'block',\r\n        textAlign: 'left',\r\n    },\r\n    expansionPanel: {\r\n        borderTop: '1px solid rgba(224, 224, 224)',\r\n    },\r\n    expansionPanelLast: {\r\n        borderTop: '1px solid rgba(224, 224, 224)',\r\n        borderBottom: '1px solid rgba(224, 224, 224)',\r\n    },\r\n    button: {\r\n        margin: theme.spacing.unit\r\n    }\r\n});\r\n\r\ninterface IListingFiltersProps extends WithStyles<typeof styles> {\r\n    filters: IFilters;\r\n    fromDate?: string;\r\n    toDate?: string;\r\n    fromPrice?: number;\r\n    toPrice?: number;\r\n    onFromPriceChange: (from: number) => void;\r\n    onToPriceChange: (from: number) => void;\r\n    onNgChange: (id: string, checked: boolean) => void;\r\n    onRTChange: (id: string, checked: boolean) => void;\r\n    onPTChange: (id: string, checked: boolean) => void;\r\n    onFromDateChange: (newDate: string) => void;\r\n    onToDateChange: (newDate: string) => void;\r\n    onApply: () => void;\r\n    onClear: () => void;\r\n}\r\n\r\ninterface IListingFiltersState {\r\n    expanded: string,\r\n}\r\n\r\nclass ListingsFilters extends React.Component<IListingFiltersProps, IListingFiltersState> {\r\n    constructor(props: Readonly<IListingFiltersProps>) {\r\n        super(props);\r\n        this.state = { expanded: 'panel2' };\r\n    }\r\n\r\n    createOnExpandHandler = (pannel: string) => (expanded: boolean) => {\r\n        this.setState({\r\n            expanded: expanded ? pannel : ''\r\n        });\r\n    }\r\n\r\n    onNeighborhoodChange = (id: string) => (event: {}, checked: boolean) => {\r\n        this.props.onNgChange(id, checked);\r\n    }\r\n\r\n    onPropertyTypeChange = (id: string) => (event: {}, checked: boolean) => {\r\n        this.props.onPTChange(id, checked);\r\n    }\r\n\r\n    onRoomTypeChange = (id: string) => (event: {}, checked: boolean) => {\r\n        this.props.onRTChange(id, checked);\r\n    }\r\n\r\n    getFiltersCount = (filtersCollection: any) => {\r\n        let count = 0;\r\n        Object.keys(filtersCollection).forEach(key => {\r\n            if (filtersCollection[key].checked) {\r\n                count++;\r\n            }\r\n        });\r\n\r\n        return count;\r\n    }\r\n\r\n    render() {\r\n        const { classes, onApply, onClear, fromDate, toDate, fromPrice, toPrice,\r\n            onFromDateChange, onToDateChange, onFromPriceChange, onToPriceChange,\r\n            filters: {\r\n                neighborhoodFilter: neighborhoods,\r\n                roomTypeFilter: roomTypes,\r\n                propertyTypeFilter: propertyTypes } } = this.props;\r\n        const { expanded } = this.state;\r\n        const ngFiltersCount = this.getFiltersCount(neighborhoods);\r\n        const rtFiltersCount = this.getFiltersCount(roomTypes);\r\n        const ptFiltersCount = this.getFiltersCount(propertyTypes);\r\n\r\n        return <React.Fragment>\r\n            <ExpPanel\r\n                className={classes.expansionPanel}\r\n                expanded={expanded === 'panel1'}\r\n                onChange={this.createOnExpandHandler('panel1')}\r\n                summary={\r\n                    <Badge badgeContent={ngFiltersCount} color=\"primary\" invisible={ngFiltersCount === 0}>\r\n                        <Typography>Neighborhood</Typography>\r\n                    </Badge>\r\n                }>\r\n                {Object.keys(neighborhoods).map(key => {\r\n                    const ng = neighborhoods[key];\r\n                    return <div key={key} className={classes.checkbox}>\r\n                        <FormControlLabel\r\n                            control={<Checkbox checked={ng.checked} onChange={this.onNeighborhoodChange(key)} color=\"primary\" value={key} />}\r\n                            label={ng.name} />\r\n                    </div>\r\n                })}\r\n            </ExpPanel>\r\n            <ExpPanel\r\n                className={classes.expansionPanel}\r\n                expanded={expanded === 'panel2'}\r\n                onChange={this.createOnExpandHandler('panel2')}\r\n                summary={\r\n                    <Badge badgeContent={rtFiltersCount} color=\"primary\" invisible={rtFiltersCount === 0}>\r\n                        <Typography>Room Type</Typography>\r\n                    </Badge>\r\n                }>\r\n                {Object.keys(roomTypes).map(key => {\r\n                    const rt = roomTypes[key];\r\n                    return <div key={key} className={classes.checkbox}>\r\n                        <FormControlLabel\r\n                            control={<Checkbox checked={rt.checked} onChange={this.onRoomTypeChange(key)} color=\"primary\" value={key} />}\r\n                            label={rt.type} />\r\n                    </div>\r\n                })}\r\n            </ExpPanel>\r\n            <ExpPanel\r\n                className={classes.expansionPanel}\r\n                expanded={expanded === 'panel3'}\r\n                onChange={this.createOnExpandHandler('panel3')}\r\n                summary={\r\n                    <Badge badgeContent={ptFiltersCount} color=\"primary\" invisible={ptFiltersCount === 0}>\r\n                        <Typography>Property Type</Typography>\r\n                    </Badge>\r\n                }>\r\n                {Object.keys(propertyTypes).map(key => {\r\n                    const pt = propertyTypes[key];\r\n                    return <div key={key} className={classes.checkbox}>\r\n                        <FormControlLabel\r\n                            control={<Checkbox checked={pt.checked} onChange={this.onPropertyTypeChange(key)} color=\"primary\" value={key} />}\r\n                            label={pt.type} />\r\n                    </div>\r\n                })}\r\n            </ExpPanel>\r\n            <ExpPanel\r\n                className={classes.expansionPanel}\r\n                expanded={expanded === 'panel4'}\r\n                onChange={this.createOnExpandHandler('panel4')}\r\n                summary={<Typography>Availability Range</Typography>}>\r\n                <FromToDatePicker\r\n                    from={fromDate}\r\n                    to={toDate}\r\n                    fromChangeHandler={onFromDateChange}\r\n                    toChangeHandler={onToDateChange}\r\n                ></FromToDatePicker>\r\n            </ExpPanel>\r\n            <ExpPanel\r\n                className={classes.expansionPanelLast}\r\n                expanded={expanded === 'panel5'}\r\n                onChange={this.createOnExpandHandler('panel5')}\r\n                summary={<Typography>Price Range</Typography>}>\r\n                <NumberRange\r\n                    onFromChange={onFromPriceChange}\r\n                    onToChange={onToPriceChange}\r\n                    from={fromPrice}\r\n                    to={toPrice}\r\n                />\r\n            </ExpPanel>\r\n            <Button variant=\"outlined\" color=\"primary\" onClick={onClear} className={classes.button}>Clear</Button>\r\n            <Button variant=\"contained\" color=\"primary\" onClick={onApply} className={classes.button}>Apply</Button>\r\n        </React.Fragment >;\r\n    }\r\n}\r\n\r\nexport default withStyles(styles)(ListingsFilters);","import { createStyles, WithStyles, withStyles, Typography } from '@material-ui/core';\r\nimport * as React from 'react';\r\nimport ListingsTable from './components/ListingsTable'\r\nimport { connect } from 'react-redux';\r\nimport { withSnackbar, InjectedNotistackProps } from 'notistack';\r\nimport { IFilters } from '../../models/grid/filtersData';\r\nimport { IListing } from '../../models/listings/Listing';\r\nimport { IListingTableDto } from '../../models/listings/ListingTableDto';\r\nimport Layout from '../../Layout';\r\nimport ListingsFilters from './components/ListingsFilters';\r\nimport { IApplicationState } from '../../redux/store';\r\nimport { fetchFiltersData, setNeighborhoodsFilter, setPropertyTypesFilter, setRoomTypesFilter, setPage, setPageSize, setOrder, setOrderBy, setFromDate, setToDate, setFromPrice, setToPrice, clearFilters, fetchTableData } from '../../redux/actions/listingsGridActions';\r\n\r\nconst styles = createStyles({\r\n    listingsFilters: {\r\n        top: '50px',\r\n        left: 0,\r\n        bottom: 0,\r\n        width: '20%',\r\n        position: 'absolute',\r\n        display: 'inline-block',\r\n    },\r\n    listingsTable: {\r\n        top: '50px',\r\n        right: 0,\r\n        bottom: 0,\r\n        width: '80%',\r\n        position: 'absolute',\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        borderLeft: '1px solid rgba(224, 224, 224)'\r\n    },\r\n    filtersContainer: {\r\n        margin: 'auto',\r\n        width: '80%',\r\n    }\r\n});\r\n\r\ninterface IListingsSceneStateProps extends IFilters {\r\n    listings: IListing[] | null;\r\n    currentPage: number;\r\n    totalCount: number;\r\n    pageSize: number;\r\n    numberOfPages: number;\r\n    order: 'asc' | 'desc';\r\n    orderBy: string;\r\n    fromDate?: string;\r\n    toDate?: string;\r\n    fromPrice?: number,\r\n    toPrice?: number,\r\n}\r\n\r\ninterface IListingsSceneActionProps {\r\n    fetchFiltersData: () => Promise<IFilters[]>\r\n    setNeighborhoodFilter: (id: string, checked: boolean) => void;\r\n    setPropertyTypeFilter: (id: string, checked: boolean) => void;\r\n    setRoomTypeFilter: (id: string, checked: boolean) => void;\r\n    setPage: (page: number) => void;\r\n    setPageSize: (size: number) => void;\r\n    setOrder: (order: 'asc' | 'desc') => void;\r\n    setOrderBy: (orderBy: string) => void;\r\n    setFromDate: (newDate: string) => void;\r\n    setToDate: (newDate: string) => void;\r\n    setFromPrice: (price: number) => void;\r\n    setToPrice: (price: number) => void;\r\n    clearFilters: () => void;\r\n    fetchTableData: () => Promise<{ total_count: number, listings: IListing[] }>;\r\n}\r\n\r\ninterface IListingsSceneProps extends IListingsSceneStateProps, IListingsSceneActionProps, WithStyles<typeof styles>, InjectedNotistackProps {\r\n}\r\n\r\ninterface IListingSceneState {\r\n}\r\n\r\nclass ListingsScene extends React.Component<IListingsSceneProps, IListingSceneState> {\r\n    componentDidMount() {\r\n        this.props.fetchFiltersData();\r\n        this.props.fetchTableData();\r\n    }\r\n\r\n    render() {\r\n        const { classes, roomTypeFilter, propertyTypeFilter, neighborhoodFilter, listings, pageSize,\r\n            numberOfPages, totalCount, currentPage, fromDate, toDate, fromPrice, toPrice } = this.props;\r\n        const filters: IFilters = { roomTypeFilter, propertyTypeFilter, neighborhoodFilter }\r\n        const rows = (listings || []).map(v => {\r\n            const row: IListingTableDto = {\r\n                id: v.id,\r\n                name: v.name,\r\n                neighborhood: v.neighborhood,\r\n                neighborhoodOverview: v.neighborhood_overview,\r\n                price: v.price,\r\n                type: {\r\n                    propertyType: v.propertytype,\r\n                    roomType: v.roomtype,\r\n                },\r\n                accommodates: v.accommodates,\r\n                rating: v.rating,\r\n            };\r\n            return row;\r\n        })\r\n        return <Layout>\r\n            <div className={classes.listingsFilters}>\r\n                <div className={classes.filtersContainer}>\r\n                    <Typography style={{ marginTop: '20px', textAlign: 'center' }} variant=\"h6\" >Filters</Typography>\r\n                    {filters && <ListingsFilters\r\n                        filters={filters}\r\n                        fromDate={fromDate}\r\n                        toDate={toDate}\r\n                        fromPrice={fromPrice}\r\n                        toPrice={toPrice}\r\n                        onFromDateChange={this.onFromDateChange}\r\n                        onToDateChange={this.onToDateChange}\r\n                        onFromPriceChange={this.onFromPriceChange}\r\n                        onToPriceChange={this.onToPriceChange}\r\n                        onPTChange={this.props.setPropertyTypeFilter}\r\n                        onRTChange={this.props.setRoomTypeFilter}\r\n                        onNgChange={this.props.setNeighborhoodFilter}\r\n                        onApply={this.applyFilters}\r\n                        onClear={this.clearFilters} />}\r\n                </div>\r\n            </div>\r\n            <div className={classes.listingsTable}>\r\n                <ListingsTable\r\n                    totalCount={totalCount}\r\n                    numberOfPages={numberOfPages}\r\n                    currentPage={currentPage}\r\n                    pageSize={pageSize} listings={rows}\r\n                    onPageChange={this.onPageChange}\r\n                    onPageSizeChange={this.onPageSizeChange}\r\n                    onSort={this.sortHandler}\r\n                    order={this.props.order}\r\n                    orderBy={this.props.orderBy} />\r\n            </div>\r\n        </Layout>\r\n    }\r\n\r\n    onPageChange = (page: number) => {\r\n        if (page < 0) {\r\n            page = 0;\r\n        }\r\n        this.props.setPage(page);\r\n        this.props.fetchTableData();\r\n    }\r\n\r\n    onPageSizeChange = (size: number) => {\r\n        this.props.setPageSize(size);\r\n        this.props.setPage(0);\r\n        this.props.fetchTableData();\r\n    }\r\n\r\n    applyFilters = () => {\r\n        const { toDate, fromDate, fromPrice, toPrice } = this.props;\r\n        let invalidFilter = false\r\n\r\n        if ((toDate && !fromDate) || (!toDate && fromDate)) {\r\n            this.props.enqueueSnackbar('Missing Date!', { variant: 'error', autoHideDuration: 4000 });\r\n            invalidFilter = true;\r\n        }\r\n\r\n        if (toDate && fromDate && fromDate > toDate) {\r\n            this.props.enqueueSnackbar('Crossing Dates!', { variant: 'error', autoHideDuration: 4000 });\r\n            invalidFilter = true;\r\n        }\r\n\r\n        if ((fromPrice && fromPrice < 0) || (toPrice && toPrice < 0)) {\r\n            this.props.enqueueSnackbar('Negative Price!', { variant: 'error', autoHideDuration: 4000 });\r\n            invalidFilter = true;\r\n        }\r\n\r\n        if (fromPrice && toPrice && fromPrice > toPrice) {\r\n\t\t\tconsole.log(fromPrice, toPrice);\r\n            this.props.enqueueSnackbar('Crossing Prices!', { variant: 'error', autoHideDuration: 4000 });\r\n            invalidFilter = true;\r\n        }\r\n\r\n        if (!invalidFilter) {\r\n            this.props.fetchTableData();\r\n            this.props.enqueueSnackbar('Filters Applied!', { variant: 'success', autoHideDuration: 4000 });\r\n        }\r\n    }\r\n\r\n    clearFilters = () => {\r\n        this.props.clearFilters();\r\n        this.props.fetchTableData();\r\n        this.props.enqueueSnackbar('Filters Cleared.', { variant: 'info', autoHideDuration: 4000 });\r\n    }\r\n\r\n    sortHandler = (orderBy: string, order: 'asc' | 'desc') => {\r\n        this.props.setOrder(order);\r\n        this.props.setOrderBy(orderBy);\r\n        this.props.fetchTableData();\r\n    }\r\n\r\n    onFromDateChange = (newDate: string) => {\r\n        this.props.setFromDate(newDate);\r\n    }\r\n\r\n    onToDateChange = (newDate: string) => {\r\n        this.props.setToDate(newDate);\r\n    }\r\n\r\n    onFromPriceChange = (value: number) => {\r\n        this.props.setFromPrice(value);\r\n    }\r\n\r\n    onToPriceChange = (value: number) => {\r\n        this.props.setToPrice(value);\r\n    }\r\n\r\n};\r\n\r\nconst mapStateToProps = (state: IApplicationState) => {\r\n    return {\r\n        roomTypeFilter: state.listingsGrid.roomTypeFilter,\r\n        propertyTypeFilter: state.listingsGrid.propertyTypeFilter,\r\n        neighborhoodFilter: state.listingsGrid.neighborhoodFilter,\r\n        listings: state.listingsGrid.listings,\r\n        numberOfPages: state.listingsGrid.numberOfPages,\r\n        totalCount: state.listingsGrid.totalCount,\r\n        currentPage: state.listingsGrid.currentPage,\r\n        pageSize: state.listingsGrid.pageSize,\r\n        order: state.listingsGrid.order,\r\n        orderBy: state.listingsGrid.orderBy,\r\n        fromDate: state.listingsGrid.fromDate,\r\n        toDate: state.listingsGrid.toDate,\r\n        fromPrice: state.listingsGrid.fromPrice,\r\n        toPrice: state.listingsGrid.toPrice\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch: any) => ({\r\n    fetchFiltersData: (): Promise<IFilters[]> => dispatch(fetchFiltersData()),\r\n    setNeighborhoodFilter: (id: string, checked: boolean) => dispatch(setNeighborhoodsFilter(id, checked)),\r\n    setPropertyTypeFilter: (id: string, checked: boolean) => dispatch(setPropertyTypesFilter(id, checked)),\r\n    setRoomTypeFilter: (id: string, checked: boolean) => dispatch(setRoomTypesFilter(id, checked)),\r\n    setPage: (page: number) => dispatch(setPage(page)),\r\n    setPageSize: (size: number) => dispatch(setPageSize(size)),\r\n    setOrder: (order: 'asc' | 'desc') => dispatch(setOrder(order)),\r\n    setOrderBy: (orderBy: string) => dispatch(setOrderBy(orderBy)),\r\n    setFromDate: (newDate: string) => dispatch(setFromDate(newDate)),\r\n    setToDate: (newDate: string) => dispatch(setToDate(newDate)),\r\n    setFromPrice: (price: number) => dispatch(setFromPrice(price)),\r\n    setToPrice: (price: number) => dispatch(setToPrice(price)),\r\n    clearFilters: () => dispatch(clearFilters()),\r\n    fetchTableData: (): Promise<{ total_count: number, listings: IListing[] }> => dispatch(fetchTableData()),\r\n});\r\n\r\nconst withSnackBar = withSnackbar(ListingsScene);\r\nconst sceneWithStyles = withStyles(styles)(withSnackBar);\r\n\r\nexport default connect<IListingsSceneStateProps, IListingsSceneActionProps>(mapStateToProps as any, mapDispatchToProps)(sceneWithStyles);\r\n\r\n","import { RadialBarChart, Legend, RadialBar, ResponsiveContainer } from 'recharts';\r\nimport React from 'react';\r\nimport './SimpleRadialBarChart.css';\r\n\r\nconst data = [\r\n\t{ name: '18-24', uv: 31.47, fill: '#8884d8' },\r\n\t{ name: '25-29', uv: 26.69, fill: '#83a6ed' },\r\n\t{ name: '30-34', uv: 15.69, fill: '#8dd1e1' },\r\n\t{ name: '35-39', uv: 8.22, fill: '#82ca9d' },\r\n\t{ name: '40-49', uv: 8.63, fill: '#a4de6c' },\r\n\t{ name: '50+', uv: 2.63, fill: '#d0ed57' },\r\n\t{ name: 'unknow', uv: 6.67, fill: '#ffc658' }\r\n];\r\n\r\nexport interface IChartFillData {\r\n\tname: string,\r\n\tvalue: number,\r\n\tfill: string,\r\n}\r\n\r\nexport default (props: { data: IChartFillData[] }) => {\r\n\treturn (\r\n\t\t<ResponsiveContainer>\r\n\t\t\t<RadialBarChart data={props.data} margin={{\r\n\t\t\t\ttop: 20, right: 20, bottom: 20, left: 20,\r\n\t\t\t}}>\r\n\t\t\t\t<RadialBar label={{ position: 'insideStart', fill: '#fff' }} background dataKey='value' />\r\n\t\t\t\t<Legend iconSize={10} width={100} verticalAlign=\"middle\" layout=\"horizontal\" align=\"right\" />\r\n\t\t\t</RadialBarChart>\r\n\t\t</ResponsiveContainer>\r\n\t);\r\n}","import React, { PureComponent } from 'react';\r\nimport {\r\n\tRadar, RadarChart, PolarGrid,\r\n\tPolarAngleAxis, PolarRadiusAxis, ResponsiveContainer,\r\n} from 'recharts';\r\n\r\n\r\n\r\nexport interface IRadialChartData {\r\n\tlabel: string;\r\n\tvalue: number;\r\n\tfullMark: number;\r\n}\r\n\r\nexport default class SpecialDomainRadarChart extends PureComponent<{data: IRadialChartData[]}> {\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<ResponsiveContainer>\r\n\t\t\t\t<RadarChart data={this.props.data} margin={{\r\n\t\t\t\t\ttop: 20, right: 20, bottom: 20, left: 20,\r\n\t\t\t\t}}>\r\n\t\t\t\t\t<PolarGrid />\r\n\t\t\t\t\t<PolarAngleAxis dataKey=\"label\" />\r\n\t\t\t\t\t<PolarRadiusAxis angle={30} domain={[0, 150]} />\r\n\t\t\t\t\t<Radar dataKey=\"value\" stroke=\"#8884d8\" fill=\"#8884d8\" fillOpacity={0.6} />\r\n\t\t\t\t</RadarChart>\r\n\t\t\t</ResponsiveContainer>\r\n\t\t);\r\n\t}\r\n}\r\n","import React, { PureComponent } from 'react';\r\nimport {\r\n\tResponsiveContainer, ComposedChart, Line, Area, Bar, XAxis, YAxis, CartesianGrid, Tooltip, Legend,\r\n} from 'recharts';\r\n\r\n\r\nexport interface IBarChartData {\r\n\tname: string,\r\n\tvalue: number,\r\n}\r\n\r\nexport default class ComposedBarChart extends PureComponent<{data: IBarChartData[]}> {\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<ResponsiveContainer>\r\n\t\t\t\t<ComposedChart\r\n\t\t\t\t\tdata={this.props.data}\r\n\t\t\t\t\tmargin={{\r\n\t\t\t\t\t\ttop: 20, right: 20, bottom: 20, left: 20,\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t<CartesianGrid stroke=\"#f5f5f5\" />\r\n\t\t\t\t\t<XAxis dataKey=\"name\" />\r\n\t\t\t\t\t<YAxis />\r\n\t\t\t\t\t<Tooltip />\r\n\t\t\t\t\t<Legend />\r\n\t\t\t\t\t<Bar dataKey=\"value\" fill=\"#413ea0\" />\r\n\t\t\t\t\t<Line type=\"monotone\" dataKey=\"value\" stroke=\"#ff7300\" />\r\n\t\t\t\t</ComposedChart>\r\n\t\t\t</ResponsiveContainer>\r\n\t\t);\r\n\t}\r\n}\r\n","import React, { PureComponent } from 'react';\r\nimport {\r\n\tLineChart, Line, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer,\r\n} from 'recharts';\r\n\r\nconst data = [\r\n\t{\r\n\t\tname: 'Page A', uv: 4000, pv: 2400, amt: 2400,\r\n\t},\r\n\t{\r\n\t\tname: 'Page B', uv: 3000, pv: 1398, amt: 2210,\r\n\t},\r\n\t{\r\n\t\tname: 'Page C', uv: 2000, pv: 9800, amt: 2290,\r\n\t},\r\n\t{\r\n\t\tname: 'Page D', uv: 2780, pv: 3908, amt: 2000,\r\n\t},\r\n\t{\r\n\t\tname: 'Page E', uv: 1890, pv: 4800, amt: 2181,\r\n\t},\r\n\t{\r\n\t\tname: 'Page F', uv: 2390, pv: 3800, amt: 2500,\r\n\t},\r\n\t{\r\n\t\tname: 'Page G', uv: 3490, pv: 4300, amt: 2100,\r\n\t},\r\n];\r\n\r\nexport interface ITripleLineChartProps {\r\n\tdata: any[],\r\n\tdataKey1: string,\r\n\tdataKey2: string,\r\n\tdataKey3: string,\r\n\tlabel: string,\r\n}\r\n\r\nexport default class SimpleLineChart extends PureComponent<ITripleLineChartProps> {\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<ResponsiveContainer>\r\n\t\t\t\t<LineChart\r\n\t\t\t\t\tdata={this.props.data}\r\n\t\t\t\t\tmargin={{\r\n\t\t\t\t\t\ttop: 20, right: 20, bottom: 20, left: 20,\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t<CartesianGrid strokeDasharray=\"3 3\" />\r\n\t\t\t\t\t<XAxis dataKey={this.props.label} />\r\n\t\t\t\t\t<YAxis />\r\n\t\t\t\t\t<Tooltip />\r\n\t\t\t\t\t<Legend />\r\n\t\t\t\t\t<Line type=\"monotone\" dataKey={this.props.dataKey1} stroke=\"#8884d8\" activeDot={{ r: 8 }} />\r\n\t\t\t\t\t<Line type=\"monotone\" dataKey={this.props.dataKey2} stroke=\"#632428\" activeDot={{ r: 8 }} />\r\n\t\t\t\t\t<Line type=\"monotone\" dataKey={this.props.dataKey3} stroke=\"#82ca9d\" />\r\n\t\t\t\t</LineChart>\r\n\t\t\t</ResponsiveContainer>\r\n\t\t);\r\n\t}\r\n}\r\n","import React from 'react';\r\nimport { withStyles, WithStyles, Theme, createStyles } from '@material-ui/core/styles';\r\nimport Drawer from '@material-ui/core/Drawer';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport InboxIcon from '@material-ui/icons/MoveToInbox';\r\nimport MailIcon from '@material-ui/icons/Mail';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport { ChevronRight } from '@material-ui/icons';\r\nimport { INeighborhood } from '../../../models/neighborhoods/neighborhood';\r\n\r\nconst styles = (theme: Theme) => createStyles({\r\n\troot: {\r\n\t\tzIndex: 1302\r\n\t}\r\n});\r\n\r\nexport interface IDrawerProps extends WithStyles<typeof styles>, IOwnProps { }\r\ninterface IOwnProps {\r\n\tneighborhoods: INeighborhood[];\r\n\tonNgSelect: (ng: INeighborhood) => void;\r\n}\r\n\r\nexport interface IDrawerState {\r\n\topen: boolean\r\n}\r\n\r\nclass LeftSideDrawer extends React.Component<IDrawerProps, IDrawerState> {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\topen: false\r\n\t\t}\r\n\t}\r\n\r\n\ttoggleDrawer = (value: boolean) => {\r\n\t\tthis.setState({\r\n\t\t\topen: value,\r\n\t\t});\r\n\t};\r\n\r\n\tonSelect = (ng: INeighborhood) => {\r\n\t\tthis.toggleDrawer(false);\r\n\t\tthis.props.onNgSelect(ng);\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst { classes, neighborhoods } = this.props;\r\n\t\tconst { open } = this.state;\r\n\r\n\t\tconst sideList = (\r\n\t\t\t<div>\r\n\t\t\t\t<List>\r\n\t\t\t\t\t{neighborhoods.map((ng, index) => (\r\n\t\t\t\t\t\t<ListItem button key={'neigh' + index} onClick={() => this.onSelect(ng)}>\r\n\t\t\t\t\t\t\t<ListItemText primary={ng.name} />\r\n\t\t\t\t\t\t</ListItem>\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t</List>\r\n\t\t\t</div>\r\n\t\t\t\t);\r\n\t\t\r\n\t\t\t\treturn (\r\n\t\t\t<React.Fragment>\r\n\t\t\t\t\t\t<IconButton onClick={() => this.toggleDrawer(true)} >\r\n\t\t\t\t\t\t\t<ChevronRight />\r\n\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t<Drawer\r\n\t\t\t\t\t\t\topen={open}\r\n\t\t\t\t\t\t\tonClose={() => this.toggleDrawer(false)}\r\n\t\t\t\t\t\t\tclasses={classes as any}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\ttabIndex={0}\r\n\t\t\t\t\t\t\t\trole=\"button\"\r\n\t\t\t\t\t\t\t\tonKeyDown={() => this.toggleDrawer(false)}>\r\n\t\t\t\t\t\t\t\t{sideList}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</Drawer>\r\n\t\t\t\t\t</React.Fragment >\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\t\r\n\t\t\texport default withStyles(styles)(LeftSideDrawer);\r\n","import * as React from 'react';\r\nimport Layout from '../../Layout';\r\nimport { Theme, createStyles, WithStyles, withStyles, Grid, CircularProgress } from '@material-ui/core';\r\nimport SimpleRadialBarChart from './components/SimpleRadialBarChart';\r\nimport SpecialDomainRadarChart from './components/SpecialDomainRadarChart';\r\nimport ComposedBarChart from './components/ComposedBarChart';\r\nimport SimpleLineChart from './components/SimpleLineChart';\r\nimport SideDrawer from './components/SideDrawer';\r\nimport { INeighborhood } from '../../models/neighborhoods/neighborhood';\r\nimport neighborhoodsApiClient from '../../api/neighborhoodsApi';\r\nimport INeighborhoodPriceReport from '../../dtos/INeighborhoodPriceReport';\r\nimport INeighborhoodAvailabilityReport from '../../dtos/INeighborhoodAvailabilityReport';\r\nimport INeghborhoodReportByAllTypesOfRatingDto from '../../dtos/INeighborhoodReportByAllTypesOfRatingDto';\r\n\r\ninterface IReportSceneStateProps {\r\n\tneighborhoods: INeighborhood[] | null;\r\n\tloading: boolean;\r\n\tpriceReports: INeighborhoodPriceReport | null;\r\n\tavailabilityReports: INeighborhoodAvailabilityReport | null;\r\n\tratingReports: INeghborhoodReportByAllTypesOfRatingDto | null;\r\n}\r\n\r\ninterface IReportSceneProps { }\r\n\r\nclass ReportsScene extends React.Component<IReportSceneProps, IReportSceneStateProps> {\r\n\r\n\tconstructor(props: IReportSceneProps) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tneighborhoods: null,\r\n\t\t\tloading: false,\r\n\t\t\tavailabilityReports: null,\r\n\t\t\tpriceReports: null,\r\n\t\t\tratingReports: null,\r\n\t\t};\r\n\t\tthis.onSelect = this.onSelect.bind(this);\r\n\t\tthis.getReportsByNgId = this.getReportsByNgId.bind(this);\r\n\t\tthis.getTotalRatingData = this.getTotalRatingData.bind(this);\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tneighborhoodsApiClient.getAllNeighborhoodsSimple().then(data => {\r\n\t\t\tif (data.length > 0) {\r\n\t\t\t\tthis.setState({ neighborhoods: data, });\r\n\t\t\t\tthis.getReportsByNgId(data[0].id)\r\n\t\t\t}\r\n\t\t}).catch(err => {\r\n\t\t\t// todo: handle error\r\n\t\t});\r\n\t}\r\n\r\n\tgetReportsByNgId(id: number) {\r\n\t\tthis.setState({ loading: true });\r\n\r\n\t\tvar p1 = neighborhoodsApiClient.getAllTypesOfRatingReportsByNgId(id);\r\n\t\tvar p2 = neighborhoodsApiClient.getAvailabilityReportsByNgId(id);\r\n\t\tvar p3 = neighborhoodsApiClient.getPriceReportsByNgId(id);\r\n\r\n\t\tPromise.all([p1, p2, p3]).then(([r1, r2, r3]) => {\r\n\t\t\tthis.setState({\r\n\t\t\t\tratingReports: r1,\r\n\t\t\t\tavailabilityReports: r2,\r\n\t\t\t\tpriceReports: r3,\r\n\t\t\t\tloading: false,\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\tonSelect(ng: INeighborhood) {\r\n\t\tthis.getReportsByNgId(ng.id);\r\n\t}\r\n\r\n\tgetTotalRatingData() {\r\n\t\tconst { ratingReports } = this.state;\r\n\t\tif (ratingReports === null) return undefined;\r\n\r\n\t\tconst data = [\r\n\t\t\t{ name: '0-20', value: ratingReports.totalRating.filter(v => v.rating && v.rating >= 0 && v.rating <= 20).reduce((r, c) => r + c.count, 0), fill: '#8884d8' },\r\n\t\t\t{ name: '21-40', value: ratingReports.totalRating.filter(v => v.rating && v.rating >= 21 && v.rating <= 40).reduce((r, c) => r + c.count, 0), fill: '#83a6ed' },\r\n\t\t\t{ name: '41-60', value: ratingReports.totalRating.filter(v => v.rating && v.rating >= 41 && v.rating <= 60).reduce((r, c) => r + c.count, 0), fill: '#8dd1e1' },\r\n\t\t\t{ name: '61-80', value: ratingReports.totalRating.filter(v => v.rating && v.rating >= 61 && v.rating <= 80).reduce((r, c) => r + c.count, 0), fill: '#82ca9d' },\r\n\t\t\t{ name: '81-100', value: ratingReports.totalRating.filter(v => v.rating && v.rating >= 81 && v.rating <= 100).reduce((r, c) => r + c.count, 0), fill: '#a4de6c' },\r\n\t\t\t{ name: 'unknow', value: ratingReports.totalRating.filter(v => !v.rating).reduce((r, c) => r + c.count, 0), fill: '#ffc658' }\r\n\t\t];\r\n\t\treturn data;\r\n\t}\r\n\r\n\tgetPriceRatingData() {\r\n\t\tconst { priceReports } = this.state;\r\n\t\tif (priceReports === null) return undefined;\r\n\r\n\t\tlet fullMark = Math.max(priceReports.avgDailyPrice, priceReports.avgMonthlyPrice, priceReports.avgWeaklyPrice) + 100;\r\n\t\tfullMark = Math.round(fullMark);\r\n\t\tconst data = [\r\n\t\t\t{\r\n\t\t\t\tlabel: 'Avg. daily price', value: Math.round(priceReports.avgDailyPrice), fullMark,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tlabel: 'Avg. monthly price', value: Math.round(priceReports.avgMonthlyPrice), fullMark,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tlabel: 'Avg. weekly price', value: Math.round(priceReports.avgWeaklyPrice), fullMark,\r\n\t\t\t}\r\n\t\t];\r\n\t\treturn data;\r\n\t}\r\n\r\n\tgetAvailabilityReportData() {\r\n\t\tconst { availabilityReports } = this.state;\r\n\t\tif (availabilityReports === null) return undefined;\r\n\r\n\t\tconst data = [\r\n\t\t\t{\r\n\t\t\t\tname: '0-30', value: availabilityReports.availability.filter(v => v.days && v.days >= 0 && v.days <= 30).reduce((r, c) => r + c.count, 0)\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tname: '31-60', value: availabilityReports.availability.filter(v => v.days && v.days >= 31 && v.days <= 60).reduce((r, c) => r + c.count, 0)\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tname: '61-90', value: availabilityReports.availability.filter(v => v.days && v.days >= 61 && v.days <= 90).reduce((r, c) => r + c.count, 0)\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tname: '91-120', value: availabilityReports.availability.filter(v => v.days && v.days >= 91 && v.days <= 120).reduce((r, c) => r + c.count, 0)\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tname: '121-150', value: availabilityReports.availability.filter(v => v.days && v.days >= 121 && v.days <= 150).reduce((r, c) => r + c.count, 0)\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tname: '151-180', value: availabilityReports.availability.filter(v => v.days && v.days >= 151 && v.days <= 180).reduce((r, c) => r + c.count, 0)\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tname: '181-210', value: availabilityReports.availability.filter(v => v.days && v.days >= 181 && v.days <= 210).reduce((r, c) => r + c.count, 0)\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tname: '211-240', value: availabilityReports.availability.filter(v => v.days && v.days >= 211 && v.days <= 240).reduce((r, c) => r + c.count, 0)\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tname: '241-270', value: availabilityReports.availability.filter(v => v.days && v.days >= 241 && v.days <= 270).reduce((r, c) => r + c.count, 0)\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tname: '271-300', value: availabilityReports.availability.filter(v => v.days && v.days >= 271 && v.days <= 300).reduce((r, c) => r + c.count, 0)\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tname: '301-330', value: availabilityReports.availability.filter(v => v.days && v.days >= 301 && v.days <= 330).reduce((r, c) => r + c.count, 0)\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tname: '331-365', value: availabilityReports.availability.filter(v => v.days && v.days >= 331 && v.days <= 365).reduce((r, c) => r + c.count, 0)\r\n\t\t\t},\r\n\t\t];\r\n\t\treturn data;\r\n\t}\r\n\r\n\tgetAllTypesOfRatingRepor() {\r\n\t\tconst { ratingReports } = this.state;\r\n\t\tif (ratingReports === null) return undefined;\r\n\r\n\t\tconst data = [\r\n\t\t\t{\r\n\t\t\t\tname: \"1\",\r\n\t\t\t\tcleanliness: ratingReports.cleanliness.filter(r => r.rating === 1).reduce((r, c) => r + c.count, 0),\r\n\t\t\t\tcheckin: ratingReports.checkin.filter(r => r.rating === 1).reduce((r, c) => r + c.count, 0),\r\n\t\t\t\tvalue: ratingReports.value.filter(r => r.rating === 1).reduce((r, c) => r + c.count, 0),\r\n\t\t\t\taccuracy: ratingReports.cleanliness.filter(r => r.rating === 1).reduce((r, c) => r + c.count, 0),\r\n\t\t\t\tlocation: ratingReports.cleanliness.filter(r => r.rating === 1).reduce((r, c) => r + c.count, 0),\r\n\t\t\t\tcommunication: ratingReports.cleanliness.filter(r => r.rating === 1).reduce((r, c) => r + c.count, 0)\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tname: \"2\",\r\n\t\t\t\tcleanliness: ratingReports.cleanliness.filter(r => r.rating === 2).reduce((r, c) => r + c.count, 0),\r\n\t\t\t\tcheckin: ratingReports.checkin.filter(r => r.rating === 2).reduce((r, c) => r + c.count, 0),\r\n\t\t\t\tvalue: ratingReports.value.filter(r => r.rating === 2).reduce((r, c) => r + c.count, 0),\r\n\t\t\t\taccuracy: ratingReports.cleanliness.filter(r => r.rating === 2).reduce((r, c) => r + c.count, 0),\r\n\t\t\t\tlocation: ratingReports.cleanliness.filter(r => r.rating === 2).reduce((r, c) => r + c.count, 0),\r\n\t\t\t\tcommunication: ratingReports.cleanliness.filter(r => r.rating === 2).reduce((r, c) => r + c.count, 0)\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tname: \"3\",\r\n\t\t\t\tcleanliness: ratingReports.cleanliness.filter(r => r.rating === 3).reduce((r, c) => r + c.count, 0),\r\n\t\t\t\tcheckin: ratingReports.checkin.filter(r => r.rating === 3).reduce((r, c) => r + c.count, 0),\r\n\t\t\t\tvalue: ratingReports.value.filter(r => r.rating === 3).reduce((r, c) => r + c.count, 0),\r\n\t\t\t\taccuracy: ratingReports.cleanliness.filter(r => r.rating === 3).reduce((r, c) => r + c.count, 0),\r\n\t\t\t\tlocation: ratingReports.cleanliness.filter(r => r.rating === 3).reduce((r, c) => r + c.count, 0),\r\n\t\t\t\tcommunication: ratingReports.cleanliness.filter(r => r.rating === 3).reduce((r, c) => r + c.count, 0)\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tname: \"4\",\r\n\t\t\t\tcleanliness: ratingReports.cleanliness.filter(r => r.rating === 4).reduce((r, c) => r + c.count, 0),\r\n\t\t\t\tcheckin: ratingReports.checkin.filter(r => r.rating === 4).reduce((r, c) => r + c.count, 0),\r\n\t\t\t\tvalue: ratingReports.value.filter(r => r.rating === 4).reduce((r, c) => r + c.count, 0),\r\n\t\t\t\taccuracy: ratingReports.cleanliness.filter(r => r.rating === 4).reduce((r, c) => r + c.count, 0),\r\n\t\t\t\tlocation: ratingReports.cleanliness.filter(r => r.rating === 4).reduce((r, c) => r + c.count, 0),\r\n\t\t\t\tcommunication: ratingReports.cleanliness.filter(r => r.rating === 4).reduce((r, c) => r + c.count, 0)\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tname: \"5\",\r\n\t\t\t\tcleanliness: ratingReports.cleanliness.filter(r => r.rating === 5).reduce((r, c) => r + c.count, 0),\r\n\t\t\t\tcheckin: ratingReports.checkin.filter(r => r.rating === 5).reduce((r, c) => r + c.count, 0),\r\n\t\t\t\tvalue: ratingReports.value.filter(r => r.rating === 5).reduce((r, c) => r + c.count, 0),\r\n\t\t\t\taccuracy: ratingReports.cleanliness.filter(r => r.rating === 5).reduce((r, c) => r + c.count, 0),\r\n\t\t\t\tlocation: ratingReports.cleanliness.filter(r => r.rating === 5).reduce((r, c) => r + c.count, 0),\r\n\t\t\t\tcommunication: ratingReports.cleanliness.filter(r => r.rating === 5).reduce((r, c) => r + c.count, 0)\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tname: \"6\",\r\n\t\t\t\tcleanliness: ratingReports.cleanliness.filter(r => r.rating === 6).reduce((r, c) => r + c.count, 0),\r\n\t\t\t\tcheckin: ratingReports.checkin.filter(r => r.rating === 6).reduce((r, c) => r + c.count, 0),\r\n\t\t\t\tvalue: ratingReports.value.filter(r => r.rating === 6).reduce((r, c) => r + c.count, 0),\r\n\t\t\t\taccuracy: ratingReports.cleanliness.filter(r => r.rating === 6).reduce((r, c) => r + c.count, 0),\r\n\t\t\t\tlocation: ratingReports.cleanliness.filter(r => r.rating === 6).reduce((r, c) => r + c.count, 0),\r\n\t\t\t\tcommunication: ratingReports.cleanliness.filter(r => r.rating === 6).reduce((r, c) => r + c.count, 0)\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tname: \"7\",\r\n\t\t\t\tcleanliness: ratingReports.cleanliness.filter(r => r.rating === 7).reduce((r, c) => r + c.count, 0),\r\n\t\t\t\tcheckin: ratingReports.checkin.filter(r => r.rating === 7).reduce((r, c) => r + c.count, 0),\r\n\t\t\t\tvalue: ratingReports.value.filter(r => r.rating === 7).reduce((r, c) => r + c.count, 0),\r\n\t\t\t\taccuracy: ratingReports.cleanliness.filter(r => r.rating === 7).reduce((r, c) => r + c.count, 0),\r\n\t\t\t\tlocation: ratingReports.cleanliness.filter(r => r.rating === 7).reduce((r, c) => r + c.count, 0),\r\n\t\t\t\tcommunication: ratingReports.cleanliness.filter(r => r.rating === 7).reduce((r, c) => r + c.count, 0)\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tname: \"8\",\r\n\t\t\t\tcleanliness: ratingReports.cleanliness.filter(r => r.rating === 8).reduce((r, c) => r + c.count, 0),\r\n\t\t\t\tcheckin: ratingReports.checkin.filter(r => r.rating === 8).reduce((r, c) => r + c.count, 0),\r\n\t\t\t\tvalue: ratingReports.value.filter(r => r.rating === 8).reduce((r, c) => r + c.count, 0),\r\n\t\t\t\taccuracy: ratingReports.cleanliness.filter(r => r.rating === 8).reduce((r, c) => r + c.count, 0),\r\n\t\t\t\tlocation: ratingReports.cleanliness.filter(r => r.rating === 8).reduce((r, c) => r + c.count, 0),\r\n\t\t\t\tcommunication: ratingReports.cleanliness.filter(r => r.rating === 8).reduce((r, c) => r + c.count, 0)\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tname: \"9\",\r\n\t\t\t\tcleanliness: ratingReports.cleanliness.filter(r => r.rating === 9).reduce((r, c) => r + c.count, 0),\r\n\t\t\t\tcheckin: ratingReports.checkin.filter(r => r.rating === 9).reduce((r, c) => r + c.count, 0),\r\n\t\t\t\tvalue: ratingReports.value.filter(r => r.rating === 9).reduce((r, c) => r + c.count, 0),\r\n\t\t\t\taccuracy: ratingReports.cleanliness.filter(r => r.rating === 9).reduce((r, c) => r + c.count, 0),\r\n\t\t\t\tlocation: ratingReports.cleanliness.filter(r => r.rating === 9).reduce((r, c) => r + c.count, 0),\r\n\t\t\t\tcommunication: ratingReports.cleanliness.filter(r => r.rating === 9).reduce((r, c) => r + c.count, 0)\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tname: \"10\",\r\n\t\t\t\tcleanliness: ratingReports.cleanliness.filter(r => r.rating === 10).reduce((r, c) => r + c.count, 0),\r\n\t\t\t\tcheckin: ratingReports.checkin.filter(r => r.rating === 10).reduce((r, c) => r + c.count, 0),\r\n\t\t\t\tvalue: ratingReports.value.filter(r => r.rating === 10).reduce((r, c) => r + c.count, 0),\r\n\t\t\t\taccuracy: ratingReports.cleanliness.filter(r => r.rating === 10).reduce((r, c) => r + c.count, 0),\r\n\t\t\t\tlocation: ratingReports.cleanliness.filter(r => r.rating === 10).reduce((r, c) => r + c.count, 0),\r\n\t\t\t\tcommunication: ratingReports.cleanliness.filter(r => r.rating === 10).reduce((r, c) => r + c.count, 0)\r\n\t\t\t},\r\n\r\n\t\t]\r\n\t\treturn data;\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst style: any = {\r\n\t\t\tboxSizing: 'border-box',\r\n\t\t\tpadding: '10px',\r\n\t\t\twidth: 'auto',\r\n\t\t\theight: '500px',\r\n\t\t\tbackgroundColor: '#fff'\r\n\t\t};\r\n\r\n\t\tconst { neighborhoods, loading } = this.state;\r\n\r\n\t\tconst ratingRep = this.getTotalRatingData();\r\n\t\tconst priceRep = this.getPriceRatingData();\r\n\t\tconst availabilityRep = this.getAvailabilityReportData();\r\n\t\tconst typesOfRatingReport = this.getAllTypesOfRatingRepor();\r\n\r\n\t\treturn <React.Fragment>\r\n\t\t\t<Layout position={'relative'}>\r\n\t\t\t\t{loading && <div style={{ textAlign: 'center', marginTop: '50px' }}>\r\n\t\t\t\t\t<CircularProgress color=\"primary\" size={65} />\r\n\t\t\t\t</div>}\r\n\t\t\t\t{!loading && neighborhoods && <div>\r\n\t\t\t\t\t<SideDrawer onNgSelect={this.onSelect} neighborhoods={neighborhoods} />\r\n\t\t\t\t</div>}\r\n\t\t\t\t{!loading && <div>\r\n\t\t\t\t\t<Grid\r\n\t\t\t\t\t\tcontainer\r\n\t\t\t\t\t\tdirection=\"row\"\r\n\t\t\t\t\t\tjustify=\"center\"\r\n\t\t\t\t\t\talignItems=\"center\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{ratingRep && <Grid item md={6}>\r\n\t\t\t\t\t\t\t<h3 style={{ textAlign: 'center' }}>Rating reports</h3>\r\n\t\t\t\t\t\t\t<div style={style}>\r\n\t\t\t\t\t\t\t\t<SimpleRadialBarChart data={ratingRep} />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</Grid>}\r\n\t\t\t\t\t\t{priceRep && <Grid item md={6}>\r\n\t\t\t\t\t\t\t<h3 style={{ textAlign: 'center' }}>Price reports</h3>\r\n\t\t\t\t\t\t\t<div style={style}>\r\n\t\t\t\t\t\t\t\t<SpecialDomainRadarChart data={priceRep} />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</Grid>}\r\n\t\t\t\t\t\t{typesOfRatingReport && <Grid item md={6}>\r\n\t\t\t\t\t\t\t<h3 style={{ textAlign: 'center' }}>Cleanliness, Location, Checkin</h3>\r\n\t\t\t\t\t\t\t<div style={style}>\r\n\t\t\t\t\t\t\t\t<SimpleLineChart data={typesOfRatingReport} label=\"name\" dataKey1=\"cleanliness\" dataKey2=\"location\" dataKey3=\"checkin\" />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</Grid>}\r\n\t\t\t\t\t\t{availabilityRep && <Grid item md={6}>\r\n\t\t\t\t\t\t\t<h3 style={{ textAlign: 'center' }}>Availability reports</h3>\r\n\t\t\t\t\t\t\t<div style={style}>\r\n\t\t\t\t\t\t\t\t<ComposedBarChart data={availabilityRep} />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</Grid>}\r\n\t\t\t\t\t\t{typesOfRatingReport && <Grid item md={6}>\r\n\t\t\t\t\t\t\t<h3 style={{ textAlign: 'center' }}>Communication, Value, Accuracy</h3>\r\n\t\t\t\t\t\t\t<div style={style}>\r\n\t\t\t\t\t\t\t\t<SimpleLineChart data={typesOfRatingReport} label=\"name\" dataKey1=\"communication\" dataKey2=\"value\" dataKey3=\"accuracy\" />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</Grid>}\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t</div>}\r\n\t\t\t</Layout >\r\n\t\t</React.Fragment>\r\n\t}\r\n};\r\n\r\nexport default ReportsScene;\r\n","import * as React from 'react';\r\nimport { Redirect, Route, Switch } from 'react-router';\r\nimport Callback from './components/Callback';\r\nimport SecureRoute from './components/SecuredRoute';\r\nimport { isAuthenticated, silentAuth } from './redux/actions/authActions';\r\nimport store from './redux/store';\r\nimport DashBoardScene from './scenes/dashboard/DashboardScene';\r\nimport ListingsScene from './scenes/listings/ListingsScene';\r\nimport ReportsScene from './scenes/reports/ReportsScene';\r\nimport AboutScene from './scenes/about/AboutScene';\r\n\r\nclass App extends React.Component<{}> {\r\n\r\n    async componentDidMount() {\r\n        const state = store.getState();\r\n        if (isAuthenticated(state)) {\r\n            return;\r\n        }\r\n\r\n        try {\r\n            await this.trySilentAuth();\r\n            this.forceUpdate();\r\n        } catch (err) {\r\n            if (err.error !== 'login_required') console.log(err.error);\r\n        }\r\n    }\r\n\r\n    trySilentAuth = () => {\r\n        store.dispatch(silentAuth() as any);\r\n    }\r\n\r\n    public render() {\r\n        return <React.Fragment>\r\n            <Switch>\r\n                <Route exact path='/callback' component={Callback} />\r\n                <Route exact path=\"/dashboard\" component={DashBoardScene} />\r\n                <SecureRoute path='/listings' component={ListingsScene} />\r\n                <SecureRoute path='/reports' component={ReportsScene} />\r\n                {/* <SecureRoute path='/About' component={AboutScene} /> */}\r\n                <Redirect to=\"/dashboard\" />\r\n            </Switch>\r\n        </React.Fragment>;\r\n    }\r\n}\r\n\r\nexport default App;\r\n","// tslint:disable:no-console\r\n// In production, we register a service worker to serve assets from local cache.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on the 'N+1' visit to a page, since previously\r\n// cached resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\r\n// This link also includes instructions on opting out of this behavior.\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport default function register() {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(\r\n      process.env.PUBLIC_URL!,\r\n      window.location.toString()\r\n    );\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Lets check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://goo.gl/SC7cgQ'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not local host. Just register service worker\r\n        registerValidSW(swUrl);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl: string) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker) {\r\n          installingWorker.onstatechange = () => {\r\n            if (installingWorker.state === 'installed') {\r\n              if (navigator.serviceWorker.controller) {\r\n                // At this point, the old content will have been purged and\r\n                // the fresh content will have been added to the cache.\r\n                // It's the perfect time to display a 'New content is\r\n                // available; please refresh.' message in your web app.\r\n                console.log('New content is available; please refresh.');\r\n              } else {\r\n                // At this point, everything has been precached.\r\n                // It's the perfect time to display a\r\n                // 'Content is cached for offline use.' message.\r\n                console.log('Content is cached for offline use.');\r\n              }\r\n            }\r\n          };\r\n        }\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl: string) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      if (\r\n        response.status === 404 ||\r\n        response.headers.get('content-type')!.indexOf('javascript') === -1\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import * as React from 'react';\r\nimport * as ReactDOM from 'react-dom';\r\nimport App from './App';\r\nimport './index.css';\r\nimport registerServiceWorker from './registerServiceWorker';\r\nimport { BrowserRouter } from 'react-router-dom';\r\nimport { Provider } from 'react-redux';\r\nimport store from './redux/store';\r\nimport { SnackbarProvider } from 'notistack';\r\n\r\nReactDOM.render(\r\n\t<Provider store={store}>\r\n\t\t<BrowserRouter>\r\n\t\t\t<SnackbarProvider maxSnack={3}>\r\n\t\t\t\t<App />\r\n\t\t\t</SnackbarProvider>\r\n\t\t</BrowserRouter>\r\n\t</Provider>,\r\n\tdocument.getElementById('root') as HTMLElement\r\n);\r\nregisterServiceWorker();\r\n"],"sourceRoot":""}